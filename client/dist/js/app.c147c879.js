(function(e){function t(t){for(var a,r,i=t[0],l=t[1],u=t[2],c=0,d=[];c<i.length;c++)r=i[c],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&d.push(o[r][0]),o[r]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);h&&h(t);while(d.length)d.shift()();return n.push.apply(n,u||[]),s()}function s(){for(var e,t=0;t<n.length;t++){for(var s=n[t],a=!0,r=1;r<s.length;r++){var i=s[r];0!==o[i]&&(a=!1)}a&&(n.splice(t--,1),e=l(l.s=s[0]))}return e}var a={},r={app:0},o={app:0},n=[];function i(e){return l.p+"js/"+({dashboard:"dashboard",favourites:"favourites",profile:"profile",profileID:"profileID",randomizer:"randomizer",search:"search"}[e]||e)+"."+{dashboard:"7fe31642",favourites:"975072e6",profile:"9cb2c6d3",profileID:"cc7cbe2b",randomizer:"2dea0758",search:"a3e05687"}[e]+".js"}function l(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,l),s.l=!0,s.exports}l.e=function(e){var t=[],s={dashboard:1,favourites:1,profile:1,profileID:1,randomizer:1,search:1};r[e]?t.push(r[e]):0!==r[e]&&s[e]&&t.push(r[e]=new Promise((function(t,s){for(var a="css/"+({dashboard:"dashboard",favourites:"favourites",profile:"profile",profileID:"profileID",randomizer:"randomizer",search:"search"}[e]||e)+"."+{dashboard:"e1070382",favourites:"b3422fd0",profile:"e413e3fc",profileID:"9daecc5a",randomizer:"1338b7dc",search:"048636fa"}[e]+".css",o=l.p+a,n=document.getElementsByTagName("link"),i=0;i<n.length;i++){var u=n[i],c=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(c===a||c===o))return t()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){u=d[i],c=u.getAttribute("data-href");if(c===a||c===o)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var a=t&&t.target&&t.target.src||o,n=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");n.code="CSS_CHUNK_LOAD_FAILED",n.request=a,delete r[e],h.parentNode.removeChild(h),s(n)},h.href=o;var p=document.getElementsByTagName("head")[0];p.appendChild(h)})).then((function(){r[e]=0})));var a=o[e];if(0!==a)if(a)t.push(a[2]);else{var n=new Promise((function(t,s){a=o[e]=[t,s]}));t.push(a[2]=n);var u,c=document.createElement("script");c.charset="utf-8",c.timeout=120,l.nc&&c.setAttribute("nonce",l.nc),c.src=i(e);var d=new Error;u=function(t){c.onerror=c.onload=null,clearTimeout(h);var s=o[e];if(0!==s){if(s){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",d.name="ChunkLoadError",d.type=a,d.request=r,s[1](d)}o[e]=void 0}};var h=setTimeout((function(){u({type:"timeout",target:c})}),12e4);c.onerror=c.onload=u,document.head.appendChild(c)}return Promise.all(t)},l.m=e,l.c=a,l.d=function(e,t,s){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(l.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(s,a,function(t){return e[t]}.bind(null,a));return s},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/",l.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],c=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var h=c;n.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("cd49")},"1f21":function(e,t,s){"use strict";var a=s("775e"),r=s.n(a);r.a},"4fc1":function(e,t,s){},"775e":function(e,t,s){},"7faf":function(e,t,s){"use strict";var a=s("b8ff"),r=s.n(a);r.a},b8ff:function(e,t,s){},c219:function(e,t,s){"use strict";var a=s("4fc1"),r=s.n(a);r.a},cd49:function(e,t,s){"use strict";s.r(t);var a=s("2b0e"),r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:e.darkMode?"bg-dark":"",attrs:{id:"app"}},[s("GoToTop"),e.$store.state.loading?s("div",{attrs:{id:"loader"}},[s("q-spinner-ios",{staticStyle:{color:"white"},attrs:{size:"48"}})],1):e._e(),s("div",{staticClass:"nightMode"},[s("b-switch",{attrs:{"passive-type":"is-dark",type:"is-warning"},model:{value:e.nm,callback:function(t){e.nm=t},expression:"nm"}},[s("span",{style:{color:e.darkMode?"#ddd":"#333"}},[e._v(e._s(e.darkMode?"Dark Mode":"Light Mode"))])])],1),s("div",{attrs:{id:"nav"}},[s("div",{staticClass:"routes"},[s("router-link",{directives:[{name:"show",rawName:"v-show",value:!e.auth,expression:"!auth"}],staticClass:"router-link",attrs:{to:"/",tag:"a"}},[s("i",{staticClass:"fas fa-home link"})]),s("span",{directives:[{name:"show",rawName:"v-show",value:!e.auth,expression:"!auth"}],staticClass:"mx-1"},[e._v("|")]),s("router-link",{directives:[{name:"show",rawName:"v-show",value:e.auth,expression:"auth"}],staticClass:"router-link",attrs:{to:"/Dashboard",tag:"a"}},[s("i",{staticClass:"fas fa-columns link"})]),s("span",{directives:[{name:"show",rawName:"v-show",value:e.auth,expression:"auth"}],staticClass:"mx-1"},[e._v("|")]),s("router-link",{staticClass:"router-link",attrs:{to:"/randomizer",tag:"a"}},[s("i",{staticClass:"fas fa-dice-six link"})]),s("span",{staticClass:"mx-1"},[e._v("|")]),s("router-link",{staticClass:"router-link",attrs:{to:"/curated",tag:"a"}},[s("i",{staticClass:"fas fa-heart link"})]),s("span",{staticClass:"mx-1"},[e._v("|")]),s("router-link",{staticClass:"router-link",attrs:{to:"/favourites",tag:"a"}},[s("i",{staticClass:"fas fa-thumbs-up link"})]),s("span",{staticClass:"mx-1"},[e._v("|")]),s("router-link",{staticClass:"router-link",attrs:{to:"/search",tag:"a"}},[s("i",{staticClass:"fas fa-search link"})]),e.auth?s("span",{staticClass:"mx-1"},[e._v("|")]):e._e(),1==e.auth?s("router-link",{attrs:{to:"/profile",tag:"a"}},[s("i",{staticClass:"fa fa-user link"})]):e._e(),s("span",{key:"a",staticClass:"mx-1"},[e._v("|")]),1==e.auth?s("span",{key:"a2",on:{click:function(t){return e.logout()}}},[s("i",{staticClass:"fas fa-door-open link"})]):e._e(),0==e.auth?s("span",{key:"a4",on:{click:e.showSignup}},[s("i",{staticClass:"fas fa-key link"})]):e._e(),0==e.auth?s("span",{key:"a5",staticClass:"mx-1"},[e._v("|")]):e._e(),0==e.auth?s("span",{key:"a6",on:{click:e.showLogin,close:function(t){return e.showLogin(t)}}},[s("i",{staticClass:"fas fa-user-plus link"})]):e._e()],1)]),s("b-modal",{attrs:{"has-modal-card":"","trap-focus":"","destroy-on-hide":!1,"aria-role":"dialog","aria-modal":""},scopedSlots:e._u([{key:"default",fn:function(t){return[s("Signup",{attrs:{showLogin:e.showSignup},on:{close:t.close}})]}}]),model:{value:e.isSignupModalActive,callback:function(t){e.isSignupModalActive=t},expression:"isSignupModalActive"}}),s("b-modal",{attrs:{"has-modal-card":"","trap-focus":"","destroy-on-hide":!1,"aria-role":"dialog","aria-modal":""},scopedSlots:e._u([{key:"default",fn:function(t){return[s("Login",{attrs:{newUser:e.newUser},on:{close:t.close}})]}}]),model:{value:e.isLoginModalActive,callback:function(t){e.isLoginModalActive=t},expression:"isLoginModalActive"}}),e.isAppAvabilable?s("transition",{staticClass:"animation_router",staticStyle:{"animation-duration":"0.1s"},attrs:{name:"fade",mode:"out-in"}},[s("router-view",{key:e.path,staticStyle:{"overflow-x":"hidden"},attrs:{appear:""}})],1):e._e()],1)},o=[],n=s("fe09"),i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"modal-card",staticStyle:{width:"auto"}},[s("header",{staticClass:"modal-card-head",class:e.darkMode?"bg-dark":""},[s("p",{staticClass:"modal-card-title"},[e._v("Sign up")]),s("button",{staticClass:"delete",attrs:{type:"button"},on:{click:function(t){return e.$emit("close")}}})]),s("section",{staticClass:"modal-card-body",class:e.darkMode?"bg-dark":""},[s("b-field",{attrs:{label:"Pick a username"}},[s("b-input",{attrs:{minlength:"3",type:"text",placeholder:"DarthVader420",required:""},model:{value:e.User.username,callback:function(t){e.$set(e.User,"username",t)},expression:"User.username"}})],1),s("b-field",{attrs:{label:"Your email"}},[s("b-input",{attrs:{type:"email",placeholder:"somecoolname@example.com",required:""},model:{value:e.User.email,callback:function(t){e.$set(e.User,"email",t)},expression:"User.email"}})],1),s("b-field",{attrs:{label:"Password"}},[s("b-input",{attrs:{type:"password","password-reveal":"",placeholder:"Your password",required:""},model:{value:e.User.password,callback:function(t){e.$set(e.User,"password",t)},expression:"User.password"}})],1),s("b-field",{attrs:{label:"Password Confirmation"}},[s("b-input",{attrs:{type:"password","password-reveal":"",placeholder:"Repeat our password",required:""},model:{value:e.User.passwordConfirmation,callback:function(t){e.$set(e.User,"passwordConfirmation",t)},expression:"User.passwordConfirmation"}})],1),s("b-field",{attrs:{label:"Password Strength"}},[s("Meter",{attrs:{"strength-meter-only":!0},model:{value:e.User.password,callback:function(t){e.$set(e.User,"password",t)},expression:"User.password"}})],1)],1),s("footer",{staticClass:"modal-card-foot",class:e.darkMode?"bg-dark":""},[s("button",{staticClass:"button",class:e.darkMode?"is-dark":"",attrs:{type:"button"},on:{click:function(t){return e.$emit("close")}}},[e._v("Close")]),s("button",{staticClass:"button",class:e.darkMode?"is-danger":"is-warning",on:{click:function(t){return e.signup()}}},[e._v("Sign up")])])])},l=[],u=s("f20a"),c=s.n(u),d={name:"Signup",props:["showLogin"],components:{Meter:c.a},data(){return{User:{username:"",email:"",password:"",passwordConfirmation:""},mailRegexp:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/}},computed:{darkMode(){return this.$store.getters["getNightMode"]}},methods:{validation(){return this.mailRegexp.test(this.User.email)},pwValidation(){return this.User.password.length>5},close(){this.$emit("close")},signup(){if(!1===this.validation())return void this.$buefy.toast.open({message:"Please enter a valid email..",type:"is-warning"});if(!1===this.pwValidation())return void this.$buefy.toast.open({message:"Password must be at least 6 characters long.",type:"is-warning"});if(this.User.password!==this.User.passwordConfirmation)return void this.$buefy.toast.open({message:"You passwords don't match.",type:"is-warning"});const e=JSON.parse(JSON.stringify(this.User));this.$store.dispatch("signup",{User:e,Close:this.close,Login:this.showLogin,$buefy:this.$buefy,$router:this.$router}),this.$emit("close",e.username)}}},h=d,p=s("2877"),f=Object(p["a"])(h,i,l,!1,null,"39fe6ae6",null),m=f.exports,g=s("a78e"),v=s.n(g),b=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"modal-card",staticStyle:{width:"auto"}},[s("header",{staticClass:"modal-card-head",class:e.darkMode?"bg-dark":""},[s("p",{staticClass:"modal-card-title"},[e._v("Login")]),s("button",{staticClass:"delete",attrs:{type:"button"},on:{click:function(t){return e.$emit("close")}}})]),s("section",{staticClass:"modal-card-body",class:e.darkMode?"bg-dark":""},[s("b-field",{attrs:{label:"Username"}},[s("b-input",{attrs:{type:"text",placeholder:"EpicGamer2020",required:""},model:{value:e.User.username,callback:function(t){e.$set(e.User,"username",t)},expression:"User.username"}})],1),s("b-field",{attrs:{label:"Password"}},[s("b-input",{ref:"pwInput",attrs:{type:"password","password-reveal":"",placeholder:"Your epic password",required:""},model:{value:e.User.password,callback:function(t){e.$set(e.User,"password",t)},expression:"User.password"}})],1),s("b-checkbox",{model:{value:e.remember,callback:function(t){e.remember=t},expression:"remember"}},[e._v("Remember Me")])],1),s("footer",{staticClass:"modal-card-foot",class:e.darkMode?"bg-dark":""},[s("button",{staticClass:"button",class:e.darkMode?"is-dark":"",attrs:{type:"button"},on:{click:function(t){return e.$emit("close")}}},[e._v("Close")]),s("button",{staticClass:"button",class:e.darkMode?"is-danger":"is-warning",on:{click:function(t){return e.login()}}},[e._v("Login")])])])},w=[],y={name:"Signup",props:["newUser"],data(){return{remember:!0,User:{username:"",password:""}}},computed:{darkMode(){return this.$store.getters["getNightMode"]}},methods:{close(){this.$emit("close")},login(){if(!this.User.password||!this.User.username)return void this.$buefy.toast.open({message:"Please enter your username and password.",type:"is-warning"});const e=JSON.parse(JSON.stringify(this.User));this.$store.dispatch("login",{User:e,$buefy:this.$buefy,$router:this.$router,Close:this.close,Remember:this.remember})}},mounted(){this.newUser&&(this.User.username=this.newUser.username,this.$refs.pwInput.focus())}},k=y,x=Object(p["a"])(k,b,w,!1,null,"d028f6e8",null),C=x.exports,S=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("transition",{attrs:{name:"vue-go-top"}},[e.isActive&&e.enabled?s("div",{staticClass:"vue-go-top",style:e.mainStyle,attrs:{role:"button",tabindex:e.tabindex},on:{click:function(t){return t.preventDefault(),e.clickHandle(t)},keydown:function(t){return t.preventDefault(),e.keyEnter(t)}}},[null!==e.src?s("div",{staticClass:"vue-go-top__icon"},[s("img",{staticClass:"vue-go-top__image",attrs:{src:e.src,alt:e.alt}}),s("div",{staticClass:"vue-go-top__ripple",style:e.rippleStyle,attrs:{"is-active":e.isRippleActive}})]):s("div",{staticClass:"vue-go-top__content"},[s("div",{staticClass:"vue-go-top__ripple",style:e.rippleStyle,attrs:{"is-active":e.isRippleActive}}),e._t("default")],2)]):e._e()])},_=[],$=s("7a1a"),P=s("6cbf"),L=s.n(P);const A=13,U=32,N=750,O=100,M=(e,t)=>{const s=t.replace(/^#/,"");return"bold"===e?"data:image/svg+xml;charset=utf8, %3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 width=%2710px%27 height=%2710px%27%3E %3Cpolygon fill=%27%23"+s+"%27 stroke=%27none%27 points=%278.646,7.354 5,3.707 1.354,7.354 0.646,6.646 5,2.293 9.354,6.646%27 /%3E %3C/svg%3E":"data:image/svg+xml;charset=utf8,%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 width=%2710px%27 height=%2710px%27%3E %3Cpolygon fill=%27%23"+s+"%27 stroke=%27none%27 points=%278.589,6.945 5,3.22 1.413,6.945 1.052,6.598 5,2.499 8.948,6.598%27 /%3E %3C/svg%3E"},R=(e,t="px")=>"number"===typeof e?e+t:e,z=new L.a;var T={props:{size:{type:Number,default:40},right:{type:[String,Number],default:50},bottom:{type:[String,Number],default:100},bottomGap:{type:[String,Number],default:0},zIndex:{type:Number,default:1e3},fgColor:{type:String,default:"#ffffff"},bgColor:{type:String,default:"#ffc200"},radius:{type:[String,Number],default:"50%"},weight:{type:String,default:"normal"},rippleBg:{type:String,default:"rgba(255, 255, 255, .5)"},boundary:{type:Number,default:200},maxWidth:{type:Number,default:640},src:{type:String,default:null},alt:{type:String,default:""},hasOutline:{type:Boolean,default:!0},boxShadow:{type:String,default:"1px 1px 2px rgba(0, 0, 0, .3)"},tabindex:{type:Number,default:0}},data(){const e=this.hasOutline?{}:{outline:"0 none"};return{enabled:!1,isActive:!1,isRippleActive:!1,mainStyle:{width:R(this.size),height:R(this.size),right:R(this.right),bottom:`calc(${R(this.bottom)} - ${R(this.bottomGap)})`,zIndex:this.zIndex,color:this.fgColor,backgroundColor:this.bgColor,backgroundImage:this.bgImage(),backgroundSize:this.size+" auto",boxShadow:this.boxShadow,opacity:this.opacity,borderRadius:R(this.radius),...e},rippleStyle:{top:R(-this.size),left:R(-this.size),width:"200%",height:"200%",backgroundColor:this.rippleBg},throttleScroll:null,throttleResize:null}},created(){this.handleResize(),this.throttleScroll=Object($["throttle"])(O,this.handleScroll),this.throttleResize=Object($["throttle"])(O,this.handleResize),window.addEventListener("resize",this.throttleResize),window.addEventListener("scroll",this.throttleScroll)},beforeDestroy(){this.throttleResize&&window.removeEventListener("resize",this.throttleResize),this.throttleScroll&&window.removeEventListener("scroll",this.throttleScroll)},methods:{clickHandle(e){if(!this.isRippleActive){const t=e.target;if(t){const s=t.getBoundingClientRect(),a=e.clientY-s.top,r=e.clientX-s.left;this.rippleStyle.top=R(a-this.size),this.rippleStyle.left=R(r-this.size)}this.isRippleActive=!0,setTimeout(()=>{this.isRippleActive=!1},N)}z.to(0)},handleScroll(){this.isActive=window.pageYOffset>this.boundary},handleResize(){this.maxWidth>0?this.enabled=!window.matchMedia(`(max-width: ${this.maxWidth}px)`).matches:this.enabled=!0},keyEnter(e){e.keyCode!==A&&e.keyCode!==U||z.to(0)},bgImage:function(){return null!==this.src?"none":`url("${M(this.weight,this.fgColor)}")`}}},j=T,E=(s("1f21"),Object(p["a"])(j,S,_,!1,null,"25dd8829",null)),I=E.exports,D={components:{QSpinnerIos:n["b"],Signup:m,Login:C,GoToTop:I},data(){return{loaded:!1,newUser:null,isSignupModalActive:!1,isLoginModalActive:!1,nm:null}},methods:{showSignup(){this.isSignupModalActive=!0},showLogin(e=null){this.isLoginModalActive=!0,e&&(this.newUser=e)},logout(){this.$store.dispatch("logout")}},watch:{nm(e){this.$store.commit("isAppAvailable",!1),this.$store.commit("showLoader");const t=document.getElementById("favicon");this.$store.commit("switchNightMode",e),1==e?(document.body.classList.add("bg-dark"),t.href=t.href.toString().includes("pink")?t.href.toString().replace("faviconpink","favicon"):t.href):(document.body.classList.remove("bg-dark"),t.href=t.href.toString().includes("pink")?t.href:t.href.toString().replace("favicon","faviconpink")),this.$store.commit("hideLoader"),this.$store.commit("isAppAvailable",!0)}},computed:{path(){return this.$router.path},auth(){return this.$store.getters.getAuth},isAppAvabilable(){return this.$store.state.isAppAvailable$},darkMode(){return this.$store.getters["getNightMode"]}},async mounted(){this.$store.dispatch("fetchTags"),this.$store.commit("showLoader");const e=g["get"]("nm");if(e&&null==this.$store.getters.getNightMode){const t=JSON.parse(e);this.nm=t,this.$store.commit("switchNightMode",t);const s=document.getElementById("favicon");!0===t?(document.body.classList.add("bg-dark"),s.href=s.href.toString().includes("pink")?s.href.toString().replace("faviconpink","favicon"):s.href):(document.body.classList.remove("bg-dark"),s.href=s.href.toString().includes("pink")?s.href:s.href.toString().replace("favicon","faviconpink"))}this.$store.commit("hideLoader"),this.$store.commit("isAppAvailable",!0)}},F=D,J=(s("7faf"),Object(p["a"])(F,r,o,!1,null,null,null)),q=J.exports,B=s("9ab4"),W=s("8c4f"),G=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"home"},[s("div",{staticClass:"title"},[s("h1",{style:{color:e.nm?"#ddd":"#333"}},[e._v("Pexies.com")])]),e.$store.getters.getAuth?e._e():s("div",{staticClass:"mt-3",staticStyle:{"text-align":"center",display:"flex","align-items":"center","justify-content":"center","flex-direction":"column"}},[s("h1",{staticClass:"title",style:{color:e.nm?"#ddd":"#333"}},[e._v("Welcome to the Pexies.")]),s("p",{staticStyle:{width:"50%",display:"inline-block",margin:"0 auto"},style:{color:e.nm?"#ddd":"#333"}},[e._v(" Pexies is a service allows you to search images across Flickr, Pexels, Unsplash and Pexies simultaneously, add them to your favourites and reach them from one place. "),s("br"),e._v(" Start using pexies today for free.")]),s("p",{staticStyle:{"font-size":"10px",opacity:"0.6",width:"60%",display:"inline-block",margin:"0 auto"},style:{color:e.nm?"#ddd":"#333"}},[e._v(" (you can still pin pictures as guest)")])]),e.$store.getters.getAuth?s("div",[s("b-button",{attrs:{type:"is-danger"},on:{click:function(t){return e.$router.push("/dashboard")}}},[e._v("Go To Dashboard")])],1):e._e()])},Y=[],H={name:"Home",computed:{nm(){return this.$store.getters["getNightMode"]}},mounted(){const e=this.$store,t=this.$router;setTimeout(()=>{e&&e.state.auth.auth&&(console.log("you are logged in..."),t.push("/Dashboard"))},500)}},V=H,Z=(s("c219"),Object(p["a"])(V,G,Y,!1,null,null,null)),K=Z.exports,Q=s("2f62"),X=s("bc3a"),ee=s.n(X);ee.a.defaults.baseURL=location.protocol+"//"+location.host;var te={state:{auth:!1,user:{}},mutations:{successfulAuth:function(e,t){e.auth=!0,e.user=t},updatedUserPicture:function(e,t){e.user.preferences.profile_picture=t},updatedUserCover:function(e,t){e.user.preferences.profile_cover=t},updateFavs:function(e,t){console.log("new favs!"),console.log(t),e.user.favourites=t},pushNewFav:function(e,t){console.log("new favs!"),console.log(t),e.user.favourites.push(t)},clearAuth:function(e){e.auth=!1,e.user={}}},actions:{logout:function(e){e.commit("clearAuth"),v.a.remove("pexies_token"),v.a.remove("pexies_username"),location.reload()},signup:function(e,t){var s=t.$buefy,a=t.User,r=t.Login,o=t.Close;console.log("new user info:",a),ee.a.post("/api/user/signup",a).then((function(e){var t=e.data;t.error?"exists"==t.code&&s.toast.open({message:t.error,type:"is-warning"}):t.username&&t.username.toString().toLowerCase()==a.username.toString().toLowerCase()&&(s.toast.open({message:"Account created!",type:"is-success"}),o(t.username),r(t))})).catch((function(e){console.log(e),s.toast.open({message:"There was en error while authentication. Please retry."+e.data,type:"is-warning"})}))},login:function(e,t){var s=t.$buefy,a=t.User,r=(t.$router,t.Close),o=t.Remember;ee.a.post("/api/user/login",a).then((function(t){var n=t.data;console.log(n),n&&n.username&&n.username.toLowerCase()==a.username.toLowerCase()?(e.commit("successfulAuth",n),o&&(v.a.set("pexies_token",n.token),v.a.set("pexies_username",n.username)),s.toast.open({message:"Welcome, "+(n.username.charAt(0)+n.username.substring(1,n.username.length))+"!",type:"is-success"}),r()):n.error&&("not_found"==n.code?s.toast.open({message:n.error,type:"is-danger"}):s.toast.open({message:"There was en error while authentication. Please retry.",type:"is-danger"}))})).catch((function(e){s.toast.open({message:"There was en error while authentication. Please retry."+e.data})}))},loginWithToken:function(e,t){var s=t.token,a=t.username,r=t.$buefy;return Object(B["a"])(this,void 0,void 0,(function(){return Object(B["b"])(this,(function(t){switch(t.label){case 0:return[4,ee.a.post("/api/user/login_token",{pexies_token:s,username:a}).then((function(t){var s=t.data;if(s&&s.username&&s.username.toLowerCase()==a.toLowerCase())return e.commit("successfulAuth",s),r&&r.toast.open({message:"Welcome back, "+(s.username.charAt(0)+s.username.substring(1,s.username.length))+"!",type:"is-success"}),!0;s.error&&("not_found"==s.code?r&&r.toast.open({message:s.error,type:"is-danger"}):r&&r.toast.open({message:"There was en error while authentication. Please retry.",type:"is-danger"}))})).catch((function(e){console.log(e),v.a.remove("pexies_token"),v.a.remove("pexies_username"),r.toast.open({message:"There was en error while authentication. Please retry."+e.data})}))];case 1:return[2,t.sent()]}}))}))},syncFavs:function(e,t){var s,a=t.$buefy,r=e.getters.getFavourites,o=e.getters.getCurrentUsersFavourites;r&&o?(s=Object(B["c"])(r,o),e.commit("showLoader"),ee.a.defaults.headers.username=e.state.user.username,ee.a.post("/api/user/sync_favourites",s).then((function(t){console.log(t),e.commit("updateFavs",t.data.favourites),e.commit("hideLoader")}))):a&&a.toast.open({message:"There is nothing in your favourites...",type:"is-warning"})}},getters:{}};function se(e,t){void 0===t&&(t=null);var s={id:e.id,width:e.width,height:e.height,url:e.urls.regular,liked:e.liked_by_user,photographer:e.user.name+" "+e.user.last_name,photographer_url:"https://unsplash.com/@"+e.user.username,photographer_id:e.user.id,tags:t?[t]:[],description:e.description,created:new Date(e["created_at"]),src:{original:e.urls.raw,large2x:e.urls.full,large:e.urls.raw,medium:e.urls.small,small:e.urls.small,portrait:e.urls.regular,landscape:e.urls.full,tiny:e.urls.thumb}};return s}var ae=function(){function e(){}return e}(),re=function(e,t){return"https://farm"+e.farm+".staticflickr.com/"+e.server+"/"+e.id+"_"+e.secret+"_"+t+".jpg"};function oe(e,t){var s=[];return e.photo?(e.photo.forEach((function(e){var a=new ae;a.liked=!1,a.url=re(e,"o"),a.photographer_url="https://www.flickr.com/people/"+e.owner+"/",a.photographer=e.title,a.src={original:re(e,"b"),large2x:re(e,"t"),large:re(e,"t"),small:re(e,"n"),portrait:re(e,"n"),landscape:re(e,"c"),tiny:re(e,"s"),medium:re(e,"n")},a.created=new Date,a.tags=t?[t]:[],s.push(a)})),s):[]}ee.a.defaults.baseURL=location.protocol+"//"+location.host,a["a"].use(Q["a"]);var ne=new Q["a"].Store({modules:{auth:te},state:{isAppAvailable$:!1,flickrSearchResultTotal:1,unsplashSearchResultTotal:1,pexelsSearchResultTotal:1,nightMode:null,curated:[],random:[],dashboardContent:[],searchResults:{pexies:[],flickr:[],pexels:[],unsplash:[]},favourites:[],loading:!0,PPloading:!1,tags:[]},mutations:{switchNightMode:function(e,t){e.nightMode=t,g["set"]("nm",t)},isAppAvailable:function(e,t){e.isAppAvailable$=t},hideLoader:function(e){e.loading=!1},showLoader:function(e){e.loading=!0},showPPLoader:function(e){e.PPloading=!0},hidePPLoader:function(e){e.PPloading=!1},storeCurated:function(e,t){e.curated=t},storeRandom:function(e,t){e.random=t},storeFavourites:function(e,t){e.favourites=t},updateFlickrPhotos:function(e,t){e.searchResults=t},updateTags:function(e,t){e.tags=t},updateSearchResults:function(e,t){e.searchResults.flickr=t.flickr,e.searchResults.pexels=t.pexels,e.searchResults.pexies=t.pexies,e.searchResults.unsplash=t.unsplash},updatePages:function(e,t){var s=t.pageName,a=t.count;e[s]=a},pushNewPage:function(e,t){var s=t.platform,a=t.photos;e.searchResults[s]=a},removeFav:function(e,t){e.loading=!0;var s=e.auth.user.favourites.findIndex((function(e){return e.url==t.url}));e.favourites=e.favourites.filter((function(e){return e.url!==t.url})),e.auth.user.favourites.splice(s,1),e.loading=!1},updateDashboard:function(e,t){e.dashboardContent=t}},getters:{getTags:function(e){return e.tags},getCuratedPhotos:function(e){return e.curated},getRandomPhotos:function(e){return e.random},getFavourites:function(e){return e.favourites},getNightMode:function(e){return e.nightMode},getDashboard:function(e){return e.dashboardContent},getSearchResults:function(e){return e.searchResults},getCurrentUsersFavourites:function(e){return e.auth.user.favourites},updateNewFavourite:function(e,t){e.auth.user.favourites.push(t)},getCurrentUser:function(e){return e.auth.user},getAuth:function(e){return e.auth.auth}},actions:{getDashboard:function(e,t){return void 0===t&&(t=null),Object(B["a"])(this,void 0,void 0,(function(){var s,a,r,o,n;return Object(B["b"])(this,(function(i){switch(i.label){case 0:return s=localStorage.getItem("interests"),s&&(s=JSON.parse(s)),a=s,r=t?"/api/user/dashboard/"+t:"/api/user/dashboard",[4,ee.a.post(r,{tags:a,username:e.getters["getCurrentUser"].username})];case 1:return o=i.sent().data,n=[],o.unsplash&&o.unsplash.forEach((function(e){var t=se(e);n.push(t)})),e.commit("updateDashboard",n),e.commit("hideLoader"),[2]}}))}))},fetchTags:function(e){ee.a.get("/api/tags/get").then((function(t){e.commit("updateTags",t.data)}))},expandPhoto:function(e,t){var s=t.$buefy,a=t.$el;return Object(B["a"])(this,void 0,void 0,(function(){return Object(B["b"])(this,(function(t){switch(t.label){case 0:return[4,s.modal.open({content:[a]})];case 1:return t.sent(),setTimeout((function(){e.commit("hideLoader")}),500),[2]}}))}))},loadFavourites:function(e){var t=localStorage.getItem("likedPhotos");t&&(t=JSON.parse(t),e.commit("storeFavourites",t)),e.commit("hideLoader")},likePhoto:function(e,t){var s=t.photo,a=t.username,r=t.$buefy,o=localStorage.getItem("likedPhotos");if(o){var n=JSON.parse(o);n.push(s),localStorage.setItem("likedPhotos",JSON.stringify(n))}else localStorage.setItem("likedPhotos","["+JSON.stringify(s)+"]");e.state.auth.auth&&ee.a.post("/api/user/favourite",{username:a,photo:s}).then((function(t){200==t.data.code?(e.commit("pushNewFav",s),r.toast.open({message:"Liked!",type:"is-success"})):r.toast.open({message:"There was en error. Please try again.",type:"is-warning"})})).catch((function(e){console.log(e)}))},dislikePhoto:function(e,t){var s=t.photo,a=t.$buefy,r=t.username,o=localStorage.getItem("likedPhotos");if(o){var n=JSON.parse(o);if(null!==n){var i=n.findIndex((function(e){return e.url==s.url}));n.splice(i,1),localStorage.setItem("likedPhotos",JSON.stringify(n)),e.dispatch("loadFavourites")}}e.state.auth.auth&&ee.a.post("/api/user/unfav",{username:r,photo:s}).then((function(t){200==t.data.code?(e.commit("removeFav",s),a.toast.open({message:"Removed!",type:"is-success"})):a.toast.open({message:"There was en error. Please try again.",type:"is-warning"})})).catch((function(e){console.log(e)}))},getRandomPexels:function(e,t){return Object(B["a"])(this,void 0,void 0,(function(){var s,a;return Object(B["b"])(this,(function(r){switch(r.label){case 0:e.commit("showLoader"),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,ee.a.get("/api/photos/pexels/random")];case 2:return s=r.sent(),a=s.data,s.headers,e.commit("storeRandom",a.photos),e.commit("hideLoader"),[3,4];case 3:return r.sent(),e.commit("hideLoader"),t.toast.open({message:"Can't reach api.",type:"is-danger"}),[3,4];case 4:return[2]}}))}))},getCuratedPexels:function(e,t){return Object(B["a"])(this,void 0,void 0,(function(){var s;return Object(B["b"])(this,(function(a){switch(a.label){case 0:e.commit("showLoader"),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,ee.a.get("/api/photos/pexels/curated")];case 2:return s=a.sent().data,e.commit("storeCurated",s),e.commit("hideLoader"),[3,4];case 3:return a.sent(),e.commit("hideLoader"),t.toast.open({message:"Can't reach api.",type:"is-danger"}),[3,4];case 4:return[2]}}))}))},searchOnAllPlatforms:function(e,t){var s=t.word,a=t.page,r=t.perPage,o=t.$buefy;return Object(B["a"])(this,void 0,void 0,(function(){var t,n,i,l,u,c,d,h,p;return Object(B["b"])(this,(function(f){switch(f.label){case 0:e.commit("showLoader"),t=[],n=[],i=[],f.label=1;case 1:return f.trys.push([1,3,,4]),[4,ee.a.get("/api/search/photos/"+s+"/"+a+"/"+r)];case 2:return l=f.sent().data,u=l.flickr,c=l.pexels,d=l.pexies,h=l.unsplash,e.commit("updatePages",{pageName:"flickrSearchResultTotal",count:parseInt(u.total)}),e.commit("updatePages",{pageName:"pexelsSearchResultTotal",count:parseInt(c.total_results)}),e.commit("updatePages",{pageName:"unsplashSearchResultTotal",count:parseInt(h.total)}),u.photo&&u.photo.length>0&&(t=oe(u,s)),h.results&&h.results.length>0&&h.results.forEach((function(e){var t=se(e,s);n.push(t)})),c.photos&&c.photos.length>0&&(i=c.photos),p={flickr:t,unsplash:n,pexels:i,pexies:d},e.commit("updateSearchResults",p),e.commit("hideLoader"),[3,4];case 3:return f.sent(),e.commit("hideLoader"),o.toast.open({message:"Can't reach api.",type:"is-danger"}),[3,4];case 4:return[2]}}))}))},searchNewPage:function(e,t){var s=t.word,a=t.page,r=t.perPage,o=t.$buefy,n=t.platform;return Object(B["a"])(this,void 0,void 0,(function(){var t,i,l;return Object(B["b"])(this,(function(u){switch(u.label){case 0:return[4,ee.a.get("/api/search/photos/"+s+"/"+a+"/"+r+"/"+n)];case 1:if(t=u.sent().data,t&&t.error)return o.toast.open({message:"Error while loading new photos, please try again.",type:"is-danger"}),[2];if("pexels"==n)t.photos&&e.commit("pushNewPage",{platform:n,photos:t.photos});else if("unsplash"==n){if(!t.results)return[2];i=[],t.results.forEach((function(e){var t=se(e,s);i.push(t)})),e.commit("pushNewPage",{platform:n,photos:i})}else"flickr"==n?(l=oe(t,s),e.commit("pushNewPage",{platform:n,photos:l})):"pexies"==n&&e.commit("pushNewPage",{platform:n,photos:t.photos});return[2]}}))}))}}});a["a"].use(W["a"]);var ie=[{path:"/",name:"Home",component:K},{path:"/Curated",name:"Curated",component:function(){return s.e("favourites").then(s.bind(null,"65cd"))}},{path:"/Favourites",name:"Favourites",component:function(){return s.e("favourites").then(s.bind(null,"0e0d"))}},{path:"/Search",name:"Search",component:function(){return s.e("search").then(s.bind(null,"2d3b"))}},{path:"/Profile",name:"Profile",meta:{requiresAuth:!0},component:function(){return s.e("profile").then(s.bind(null,"c66d"))}},{path:"/Profile/:username",name:"ProfileID",component:function(){return s.e("profileID").then(s.bind(null,"8946"))}},{path:"/Randomizer",name:"Randomizer",component:function(){return s.e("randomizer").then(s.bind(null,"617b"))}},{path:"/Dashboard",name:"Dashboard",meta:{requiresAuth:!0},component:function(){return s.e("dashboard").then(s.bind(null,"7277"))}}],le=new W["a"]({mode:"history",base:"/",routes:ie});le.beforeEach((function(e,t,s){return Object(B["a"])(void 0,void 0,void 0,(function(){var t,a,r;return Object(B["b"])(this,(function(o){switch(o.label){case 0:return t=g["get"]("pexies_token"),a=g["get"]("pexies_username"),e.matched.some((function(e){return e.meta.requiresAuth}))?ne.getters.getAuth?(s(),[3,3]):[3,1]:[3,4];case 1:return t&&a?(ne.commit("showLoader"),[4,ne.dispatch("loginWithToken",{token:t,username:a}).then((function(e){return e}))]):[3,3];case 2:r=o.sent(),console.log(r),console.log(r),r?s():(ne.dispatch("logout"),s("/")),o.label=3;case 3:return[3,7];case 4:return t&&a?(ne.commit("showLoader"),[4,ne.dispatch("loginWithToken",{token:t,username:a}).then((function(e){return e}))]):[3,6];case 5:r=o.sent(),r?s():s("/"),o.label=6;case 6:s(),o.label=7;case 7:return[2]}}))}))}));var ue=le,ce=s("289d"),de=(s("c350"),s("caf9"));a["a"].use(ce["a"]),a["a"].use(de["a"],{preLoad:1.3,error:"/error.png",loading:"/loading.gif",attempt:1,lazyComponent:!0}),a["a"].config.productionTip=!1,new a["a"]({router:ue,store:ne,render:function(e){return e(q)}}).$mount("#app")}});
//# sourceMappingURL=app.c147c879.js.map