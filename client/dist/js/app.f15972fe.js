(function(e){function t(t){for(var a,r,i=t[0],l=t[1],u=t[2],c=0,d=[];c<i.length;c++)r=i[c],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&d.push(o[r][0]),o[r]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);p&&p(t);while(d.length)d.shift()();return n.push.apply(n,u||[]),s()}function s(){for(var e,t=0;t<n.length;t++){for(var s=n[t],a=!0,r=1;r<s.length;r++){var i=s[r];0!==o[i]&&(a=!1)}a&&(n.splice(t--,1),e=l(l.s=s[0]))}return e}var a={},r={app:0},o={app:0},n=[];function i(e){return l.p+"js/"+({favourites:"favourites",profile:"profile",profileID:"profileID",randomizer:"randomizer",search:"search"}[e]||e)+"."+{favourites:"6149305a",profile:"d619053a",profileID:"2b8356d8",randomizer:"e6011624",search:"581b6d09"}[e]+".js"}function l(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,l),s.l=!0,s.exports}l.e=function(e){var t=[],s={favourites:1,profile:1,profileID:1,randomizer:1,search:1};r[e]?t.push(r[e]):0!==r[e]&&s[e]&&t.push(r[e]=new Promise((function(t,s){for(var a="css/"+({favourites:"favourites",profile:"profile",profileID:"profileID",randomizer:"randomizer",search:"search"}[e]||e)+"."+{favourites:"1c48b3d0",profile:"23845cd0",profileID:"9dc9d2d5",randomizer:"dd06807a",search:"51e8337b"}[e]+".css",o=l.p+a,n=document.getElementsByTagName("link"),i=0;i<n.length;i++){var u=n[i],c=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(c===a||c===o))return t()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){u=d[i],c=u.getAttribute("data-href");if(c===a||c===o)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var a=t&&t.target&&t.target.src||o,n=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");n.code="CSS_CHUNK_LOAD_FAILED",n.request=a,delete r[e],p.parentNode.removeChild(p),s(n)},p.href=o;var h=document.getElementsByTagName("head")[0];h.appendChild(p)})).then((function(){r[e]=0})));var a=o[e];if(0!==a)if(a)t.push(a[2]);else{var n=new Promise((function(t,s){a=o[e]=[t,s]}));t.push(a[2]=n);var u,c=document.createElement("script");c.charset="utf-8",c.timeout=120,l.nc&&c.setAttribute("nonce",l.nc),c.src=i(e);var d=new Error;u=function(t){c.onerror=c.onload=null,clearTimeout(p);var s=o[e];if(0!==s){if(s){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",d.name="ChunkLoadError",d.type=a,d.request=r,s[1](d)}o[e]=void 0}};var p=setTimeout((function(){u({type:"timeout",target:c})}),12e4);c.onerror=c.onload=u,document.head.appendChild(c)}return Promise.all(t)},l.m=e,l.c=a,l.d=function(e,t,s){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(l.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(s,a,function(t){return e[t]}.bind(null,a));return s},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/",l.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],c=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var p=c;n.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("cd49")},"1f21":function(e,t,s){"use strict";var a=s("775e"),r=s.n(a);r.a},"4fc1":function(e,t,s){},"775e":function(e,t,s){},"7faf":function(e,t,s){"use strict";var a=s("b8ff"),r=s.n(a);r.a},b8ff:function(e,t,s){},c219:function(e,t,s){"use strict";var a=s("4fc1"),r=s.n(a);r.a},cd49:function(e,t,s){"use strict";s.r(t);var a=s("2b0e"),r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:e.darkMode?"bg-dark":"",attrs:{id:"app"}},[s("GoToTop"),e.$store.state.loading?s("div",{attrs:{id:"loader"}},[s("q-spinner-ios",{staticStyle:{color:"white"},attrs:{size:"48"}})],1):e._e(),s("div",{staticClass:"nightMode"},[s("b-switch",{attrs:{"passive-type":"is-dark",type:"is-warning"},model:{value:e.nm,callback:function(t){e.nm=t},expression:"nm"}},[s("span",{style:{color:e.darkMode?"#ddd":"#333"}},[e._v(e._s(e.darkMode?"Dark Mode":"Light Mode"))])])],1),s("div",{attrs:{id:"nav"}},[s("div",{staticClass:"routes"},[s("router-link",{staticClass:"router-link",attrs:{to:"/",tag:"a"}},[s("i",{staticClass:"fas fa-columns link"})]),s("span",{staticClass:"mx-1"},[e._v("|")]),s("router-link",{staticClass:"router-link",attrs:{to:"/randomizer",tag:"a"}},[s("i",{staticClass:"fas fa-dice-six link"})]),s("span",{staticClass:"mx-1"},[e._v("|")]),s("router-link",{staticClass:"router-link",attrs:{to:"/curated",tag:"a"}},[s("i",{staticClass:"fas fa-heart link"})]),s("span",{staticClass:"mx-1"},[e._v("|")]),s("router-link",{staticClass:"router-link",attrs:{to:"/favourites",tag:"a"}},[s("i",{staticClass:"fas fa-thumbs-up link"})]),s("span",{staticClass:"mx-1"},[e._v("|")]),s("router-link",{staticClass:"router-link",attrs:{to:"/search",tag:"a"}},[s("i",{staticClass:"fas fa-search link"})]),s("span",{staticClass:"mx-1"},[e._v("|")]),0==e.$store.state.auth.auth?s("a",{on:{click:function(t){return t.preventDefault(),e.showLogin()}}},[s("i",{staticClass:"fas fa-key link"})]):e._e(),0==e.$store.state.auth.auth?s("span",{staticClass:"mx-1"},[e._v("|")]):e._e(),0==e.$store.state.auth.auth?s("a",{on:{click:function(t){return t.preventDefault(),e.showSignup()}}},[s("i",{staticClass:"fa fa-user-plus link"})]):e._e(),1==e.$store.state.auth.auth?s("router-link",{attrs:{to:"/profile"}},[s("i",{staticClass:"fa fa-user link"})]):e._e(),1==e.$store.state.auth.auth?s("span",{staticClass:"mx-1"},[e._v("|")]):e._e(),s("a",{directives:[{name:"show",rawName:"v-show",value:1==e.$store.state.auth.auth,expression:"$store.state.auth.auth == true"}],on:{click:function(t){return t.preventDefault(),e.logout()}}},[s("i",{staticClass:"fas fa-door-open link"})])],1)]),s("b-modal",{attrs:{"has-modal-card":"","trap-focus":"","destroy-on-hide":!1,"aria-role":"dialog","aria-modal":""},scopedSlots:e._u([{key:"default",fn:function(t){return[s("Signup",{attrs:{showLogin:e.showLogin},on:{close:t.close}})]}}]),model:{value:e.isSignupModalActive,callback:function(t){e.isSignupModalActive=t},expression:"isSignupModalActive"}}),s("b-modal",{attrs:{"has-modal-card":"","trap-focus":"","destroy-on-hide":!1,"aria-role":"dialog","aria-modal":""},scopedSlots:e._u([{key:"default",fn:function(t){return[s("Login",{attrs:{newUser:e.newUser},on:{close:t.close}})]}}]),model:{value:e.isLoginModalActive,callback:function(t){e.isLoginModalActive=t},expression:"isLoginModalActive"}}),s("transition",{staticStyle:{"animation-duration":"0.2s"},attrs:{name:"fade",mode:"out-in"}},[s("router-view",{key:e.path,staticStyle:{"overflow-x":"hidden"},attrs:{appear:""}})],1)],1)},o=[],n=s("fe09"),i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"modal-card",staticStyle:{width:"auto"}},[s("header",{staticClass:"modal-card-head",class:e.darkMode?"bg-dark":""},[s("p",{staticClass:"modal-card-title"},[e._v("Sign up")]),s("button",{staticClass:"delete",attrs:{type:"button"},on:{click:function(t){return e.$emit("close")}}})]),s("section",{staticClass:"modal-card-body",class:e.darkMode?"bg-dark":""},[s("b-field",{attrs:{label:"Pick a username"}},[s("b-input",{attrs:{minlength:"3",type:"text",placeholder:"DarthVader420",required:""},model:{value:e.User.username,callback:function(t){e.$set(e.User,"username",t)},expression:"User.username"}})],1),s("b-field",{attrs:{label:"Your email"}},[s("b-input",{attrs:{type:"email",placeholder:"somecoolname@example.com",required:""},model:{value:e.User.email,callback:function(t){e.$set(e.User,"email",t)},expression:"User.email"}})],1),s("b-field",{attrs:{label:"Password"}},[s("b-input",{attrs:{type:"password","password-reveal":"",placeholder:"Your password",required:""},model:{value:e.User.password,callback:function(t){e.$set(e.User,"password",t)},expression:"User.password"}})],1),s("b-field",{attrs:{label:"Password Confirmation"}},[s("b-input",{attrs:{type:"password","password-reveal":"",placeholder:"Repeat our password",required:""},model:{value:e.User.passwordConfirmation,callback:function(t){e.$set(e.User,"passwordConfirmation",t)},expression:"User.passwordConfirmation"}})],1),s("b-field",{attrs:{label:"Password Strength"}},[s("Meter",{attrs:{"strength-meter-only":!0},model:{value:e.User.password,callback:function(t){e.$set(e.User,"password",t)},expression:"User.password"}})],1)],1),s("footer",{staticClass:"modal-card-foot",class:e.darkMode?"bg-dark":""},[s("button",{staticClass:"button",class:e.darkMode?"is-dark":"",attrs:{type:"button"},on:{click:function(t){return e.$emit("close")}}},[e._v("Close")]),s("button",{staticClass:"button",class:e.darkMode?"is-danger":"is-warning",on:{click:function(t){return e.signup()}}},[e._v("Sign up")])])])},l=[],u=s("f20a"),c=s.n(u),d={name:"Signup",props:["showLogin"],components:{Meter:c.a},data(){return{User:{username:"",email:"",password:"",passwordConfirmation:""},mailRegexp:/^\w+([-]?\w+)*@\w+([-]?\w+)*(\.\w{2,3})+$/}},computed:{darkMode(){return this.$store.getters["getNightMode"]}},methods:{validation(){return this.mailRegexp.test(this.User.email)},close(){this.$emit("close")},signup(){if(!1===this.validation())return void this.$buefy.toast.open({message:"Please enter a valid email.",type:"is-warning"});if(this.User.password!==this.User.passwordConfirmation)return void this.$buefy.toast.open({message:"You passwords don't match.",type:"is-warning"});const e=JSON.parse(JSON.stringify(this.User));this.$store.dispatch("signup",{User:e,Login:this.showLogin,$buefy:this.$buefy,Close:this.close,$router:this.$router})}}},p=d,h=s("2877"),f=Object(h["a"])(p,i,l,!1,null,"5448fb69",null),m=f.exports,g=s("a78e"),v=s.n(g),b=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"modal-card",staticStyle:{width:"auto"}},[s("header",{staticClass:"modal-card-head",class:e.darkMode?"bg-dark":""},[s("p",{staticClass:"modal-card-title"},[e._v("Login")]),s("button",{staticClass:"delete",attrs:{type:"button"},on:{click:function(t){return e.$emit("close")}}})]),s("section",{staticClass:"modal-card-body",class:e.darkMode?"bg-dark":""},[s("b-field",{attrs:{label:"Username"}},[s("b-input",{attrs:{type:"text",placeholder:"EpicGamer2020",required:""},model:{value:e.User.username,callback:function(t){e.$set(e.User,"username",t)},expression:"User.username"}})],1),s("b-field",{attrs:{label:"Password"}},[s("b-input",{ref:"pwInput",attrs:{type:"password","password-reveal":"",placeholder:"Your epic password",required:""},model:{value:e.User.password,callback:function(t){e.$set(e.User,"password",t)},expression:"User.password"}})],1),s("b-checkbox",{model:{value:e.remember,callback:function(t){e.remember=t},expression:"remember"}},[e._v("Remember Me")])],1),s("footer",{staticClass:"modal-card-foot",class:e.darkMode?"bg-dark":""},[s("button",{staticClass:"button",class:e.darkMode?"is-dark":"",attrs:{type:"button"},on:{click:function(t){return e.$emit("close")}}},[e._v("Close")]),s("button",{staticClass:"button",class:e.darkMode?"is-danger":"is-warning",on:{click:function(t){return e.login()}}},[e._v("Login")])])])},w=[],y={name:"Signup",props:["newUser"],data(){return{remember:!0,User:{username:"",password:""}}},computed:{darkMode(){return this.$store.getters["getNightMode"]}},methods:{close(){this.$emit("close")},login(){if(!this.User.password||!this.User.username)return void this.$buefy.toast.open({message:"Please enter your username and password.",type:"is-warning"});const e=JSON.parse(JSON.stringify(this.User));this.$store.dispatch("login",{User:e,$buefy:this.$buefy,$router:this.$router,Close:this.close,Remember:this.remember})}},mounted(){this.newUser&&(this.User.username=this.newUser.username,this.$refs.pwInput.focus())}},k=y,C=Object(h["a"])(k,b,w,!1,null,"d028f6e8",null),x=C.exports,S=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("transition",{attrs:{name:"vue-go-top"}},[e.isActive&&e.enabled?s("div",{staticClass:"vue-go-top",style:e.mainStyle,attrs:{role:"button",tabindex:e.tabindex},on:{click:function(t){return t.preventDefault(),e.clickHandle(t)},keydown:function(t){return t.preventDefault(),e.keyEnter(t)}}},[null!==e.src?s("div",{staticClass:"vue-go-top__icon"},[s("img",{staticClass:"vue-go-top__image",attrs:{src:e.src,alt:e.alt}}),s("div",{staticClass:"vue-go-top__ripple",style:e.rippleStyle,attrs:{"is-active":e.isRippleActive}})]):s("div",{staticClass:"vue-go-top__content"},[s("div",{staticClass:"vue-go-top__ripple",style:e.rippleStyle,attrs:{"is-active":e.isRippleActive}}),e._t("default")],2)]):e._e()])},_=[],$=s("7a1a"),P=s("6cbf"),L=s.n(P);const U=13,R=32,M=750,N=100,O=(e,t)=>{const s=t.replace(/^#/,"");return"bold"===e?"data:image/svg+xml;charset=utf8, %3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 width=%2710px%27 height=%2710px%27%3E %3Cpolygon fill=%27%23"+s+"%27 stroke=%27none%27 points=%278.646,7.354 5,3.707 1.354,7.354 0.646,6.646 5,2.293 9.354,6.646%27 /%3E %3C/svg%3E":"data:image/svg+xml;charset=utf8,%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 width=%2710px%27 height=%2710px%27%3E %3Cpolygon fill=%27%23"+s+"%27 stroke=%27none%27 points=%278.589,6.945 5,3.22 1.413,6.945 1.052,6.598 5,2.499 8.948,6.598%27 /%3E %3C/svg%3E"},A=(e,t="px")=>"number"===typeof e?e+t:e,z=new L.a;var E={props:{size:{type:Number,default:40},right:{type:[String,Number],default:50},bottom:{type:[String,Number],default:100},bottomGap:{type:[String,Number],default:0},zIndex:{type:Number,default:1e3},fgColor:{type:String,default:"#ffffff"},bgColor:{type:String,default:"#ffc200"},radius:{type:[String,Number],default:"50%"},weight:{type:String,default:"normal"},rippleBg:{type:String,default:"rgba(255, 255, 255, .5)"},boundary:{type:Number,default:200},maxWidth:{type:Number,default:640},src:{type:String,default:null},alt:{type:String,default:""},hasOutline:{type:Boolean,default:!0},boxShadow:{type:String,default:"1px 1px 2px rgba(0, 0, 0, .3)"},tabindex:{type:Number,default:0}},data(){const e=this.hasOutline?{}:{outline:"0 none"};return{enabled:!1,isActive:!1,isRippleActive:!1,mainStyle:{width:A(this.size),height:A(this.size),right:A(this.right),bottom:`calc(${A(this.bottom)} - ${A(this.bottomGap)})`,zIndex:this.zIndex,color:this.fgColor,backgroundColor:this.bgColor,backgroundImage:this.bgImage(),backgroundSize:this.size+" auto",boxShadow:this.boxShadow,opacity:this.opacity,borderRadius:A(this.radius),...e},rippleStyle:{top:A(-this.size),left:A(-this.size),width:"200%",height:"200%",backgroundColor:this.rippleBg},throttleScroll:null,throttleResize:null}},created(){this.handleResize(),this.throttleScroll=Object($["throttle"])(N,this.handleScroll),this.throttleResize=Object($["throttle"])(N,this.handleResize),window.addEventListener("resize",this.throttleResize),window.addEventListener("scroll",this.throttleScroll)},beforeDestroy(){this.throttleResize&&window.removeEventListener("resize",this.throttleResize),this.throttleScroll&&window.removeEventListener("scroll",this.throttleScroll)},methods:{clickHandle(e){if(!this.isRippleActive){const t=e.target;if(t){const s=t.getBoundingClientRect(),a=e.clientY-s.top,r=e.clientX-s.left;this.rippleStyle.top=A(a-this.size),this.rippleStyle.left=A(r-this.size)}this.isRippleActive=!0,setTimeout(()=>{this.isRippleActive=!1},M)}z.to(0)},handleScroll(){this.isActive=window.pageYOffset>this.boundary},handleResize(){this.maxWidth>0?this.enabled=!window.matchMedia(`(max-width: ${this.maxWidth}px)`).matches:this.enabled=!0},keyEnter(e){e.keyCode!==U&&e.keyCode!==R||z.to(0)},bgImage:function(){return null!==this.src?"none":`url("${O(this.weight,this.fgColor)}")`}}},T=E,I=(s("1f21"),Object(h["a"])(T,S,_,!1,null,"25dd8829",null)),j=I.exports,F={components:{QSpinnerIos:n["b"],Signup:m,Login:x,GoToTop:j},data(){return{loaded:!1,newUser:null,isSignupModalActive:!1,isLoginModalActive:!1,nm:null}},methods:{showSignup(){this.isSignupModalActive=!0},showLogin(e=null){e&&(this.newUser=e),this.isLoginModalActive=!0},logout(){this.$store.dispatch("logout")}},watch:{nm(e){this.$store.commit("showLoader");const t=document.getElementById("favicon");this.$store.commit("switchNightMode",e),1==e?(document.body.classList.add("bg-dark"),t.href=t.href.toString().includes("pink")?t.href.toString().replace("faviconpink","favicon"):t.href):(document.body.classList.remove("bg-dark"),t.href=t.href.toString().includes("pink")?t.href:t.href.toString().replace("favicon","faviconpink")),this.$store.commit("hideLoader")}},computed:{darkMode(){return this.$store.getters["getNightMode"]}},async mounted(){this.$store.commit("showLoader");const e=g["get"]("nm");if(e){const t=JSON.parse(e);this.nm=t,this.$store.commit("switchNightMode",t);const s=document.getElementById("favicon");!0===t?(document.body.classList.add("bg-dark"),s.href=s.href.toString().includes("pink")?s.href.toString().replace("faviconpink","favicon"):s.href):(document.body.classList.remove("bg-dark"),s.href=s.href.toString().includes("pink")?s.href:s.href.toString().replace("favicon","faviconpink"))}const t=g["get"]("pexies_token"),s=g["get"]("pexies_username");t&&s&&(this.$store.commit("showLoader"),await this.$store.dispatch("loginWithToken",{token:t,username:s,$buefy:this.$buefy})),this.$store.commit("hideLoader")}},D=F,J=(s("7faf"),Object(h["a"])(D,r,o,!1,null,null,null)),q=J.exports,B=s("8c4f"),W=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"home"},[s("div",{staticClass:"title"},[s("h1",{style:{color:e.nm?"#ddd":"#333"}},[e._v("Pexies.com")])])])},Y=[],G={name:"Home",mounted(){this.$store.state.auth.auth&&this.$router.push("/Profile")}},H=G,K=(s("c219"),Object(h["a"])(H,W,Y,!1,null,null,null)),Q=K.exports,V=s("9ab4"),X=s("2f62"),Z=s("7338"),ee=s.n(Z);ee.a.defaults.baseURL=location.protocol+"//"+location.host;var te={state:{auth:!1,user:{}},mutations:{successfulAuth:function(e,t){e.auth=!0,e.user=t},updatedUserPicture:function(e,t){e.user.preferences.profile_picture=t},updatedUserCover:function(e,t){e.user.preferences.profile_cover=t},updateFavs:function(e,t){console.log("new favs!"),console.log(t),e.user.favourites=t},pushNewFav:function(e,t){console.log("new favs!"),console.log(t),e.user.favourites.push(t)}},actions:{logout:function(e){v.a.remove("pexies_token"),v.a.remove("pexies_username"),location.reload()},signup:function(e,t){var s=t.$buefy,a=t.User,r=t.Login,o=t.Close;console.log("new user info:",a),ee.a.post("/api/user/signup",a).then((function(e){var t=e.data;t.error?"exists"==t.code&&s.toast.open({message:t.error,type:"is-warning"}):t.username&&t.username.toString().toLowerCase()==a.username.toString().toLowerCase()&&(s.toast.open({message:"Account created!",type:"is-success"}),o(),r(t))})).catch((function(e){console.log(e),s.toast.open({message:"There was en error while authentication. Please retry."+e.data,type:"is-warning"})}))},login:function(e,t){var s=t.$buefy,a=t.User,r=(t.$router,t.Close),o=t.Remember;ee.a.post("/api/user/login",a).then((function(t){var n=t.data;n&&n.username&&n.username.toLowerCase()==a.username.toLowerCase()?(e.commit("successfulAuth",n),o&&(v.a.set("pexies_token",n.token),v.a.set("pexies_username",n.username)),s.toast.open({message:"Welcome, "+(n.username.charAt(0)+n.username.substring(1,n.username.length))+"!",type:"is-success"}),ne.dispatch("syncFavs",{}),r()):n.error&&("not_found"==n.code?s.toast.open({message:n.error,type:"is-danger"}):s.toast.open({message:"There was en error while authentication. Please retry.",type:"is-danger"}))})).catch((function(e){s.toast.open({message:"There was en error while authentication. Please retry."+e.data})}))},loginWithToken:function(e,t){var s=t.token,a=t.username,r=t.$buefy;ee.a.post("/api/user/login_token",{pexies_token:s,username:a}).then((function(t){var s=t.data;s&&s.username&&s.username.toLowerCase()==a.toLowerCase()?(e.commit("successfulAuth",s),r.toast.open({message:"Welcome back, "+(s.username.charAt(0)+s.username.substring(1,s.username.length))+"!",type:"is-success"}),ne.dispatch("syncFavs",{})):s.error&&("not_found"==s.code?r.toast.open({message:s.error,type:"is-danger"}):r.toast.open({message:"There was en error while authentication. Please retry.",type:"is-danger"}))})).catch((function(e){console.log(e),v.a.remove("pexies_token"),v.a.remove("pexies_username"),r.toast.open({message:"There was en error while authentication. Please retry."+e.data})}))},syncFavs:function(e,t){var s,a=t.$buefy,r=e.getters.getFavourites,o=e.getters.getCurrentUsersFavourites;r&&o?(s=Object(V["c"])(r,o),e.commit("showLoader"),ee.a.defaults.headers.username=e.state.user.username,ee.a.post("/api/user/sync_favourites",s).then((function(t){console.log(t),e.commit("updateFavs",t.data.favourites),e.commit("hideLoader")}))):a&&a.toast.open({message:"There is nothing in your favourites...",type:"is-warning"})}},getters:{}};function se(e){var t={id:e.id,width:e.width,height:e.height,url:e.urls.regular,liked:e.liked_by_user,photographer:e.user.name+" "+e.user.last_name,photographer_url:"https://unsplash.com/@"+e.user.username,photographer_id:e.user.id,src:{original:e.urls.raw,large2x:e.urls.full,large:e.urls.raw,medium:e.urls.small,small:e.urls.small,portrait:e.urls.regular,landscape:e.urls.full,tiny:e.urls.thumb}};return t}var ae=function(){function e(){}return e}(),re=function(e,t){return"https://farm"+e.farm+".staticflickr.com/"+e.server+"/"+e.id+"_"+e.secret+"_"+t+".jpg"};function oe(e){var t=[];return e.photo?(e.photo.forEach((function(e){var s=new ae;s.liked=!1,s.url=re(e,"o"),s.photographer_url="https://www.flickr.com/people/"+e.owner+"/",s.photographer=e.title,s.src={original:re(e,"b"),large2x:re(e,"t"),large:re(e,"t"),small:re(e,"n"),portrait:re(e,"n"),landscape:re(e,"c"),tiny:re(e,"s"),medium:re(e,"n")},t.push(s)})),t):[]}ee.a.defaults.baseURL=location.protocol+"//"+location.host,a["a"].use(X["a"]);var ne=new X["a"].Store({modules:{auth:te},state:{flickrSearchResultTotal:1,unsplashSearchResultTotal:1,pexelsSearchResultTotal:1,nightMode:!1,curated:[],random:[],searchResults:{pexies:[],flickr:[],pexels:[],unsplash:[]},favourites:[],loading:!0,PPloading:!1,tags:[]},mutations:{switchNightMode:function(e,t){e.nightMode=t,g["set"]("nm",t)},hideLoader:function(e){e.loading=!1},showLoader:function(e){e.loading=!0},showPPLoader:function(e){e.PPloading=!0},hidePPLoader:function(e){e.PPloading=!1},storeCurated:function(e,t){e.curated=t},storeRandom:function(e,t){e.random=t},storeFavourites:function(e,t){e.favourites=t},updateFlickrPhotos:function(e,t){e.searchResults=t},updateTags:function(e,t){e.tags=t},updateSearchResults:function(e,t){e.searchResults.flickr=t.flickr,e.searchResults.pexels=t.pexels,e.searchResults.pexies=t.pexies,e.searchResults.unsplash=t.unsplash,console.log("search results:"),console.log(e.searchResults)},updatePages:function(e,t){var s=t.pageName,a=t.count;console.log(s,a),e[s]=a},pushNewPage:function(e,t){var s=t.platform,a=t.photos;e.searchResults[s]=a},removeFav:function(e,t){e.loading=!0;var s=e.auth.user.favourites.findIndex((function(e){return e.url==t.url}));e.favourites=e.favourites.filter((function(e){return e.url!==t.url})),e.auth.user.favourites.splice(s,1),e.loading=!1}},getters:{getTags:function(e){return e.tags},getCuratedPhotos:function(e){return e.curated},getRandomPhotos:function(e){return e.random},getFavourites:function(e){return e.favourites},getNightMode:function(e){return e.nightMode},getSearchResults:function(e){return e.searchResults},getCurrentUsersFavourites:function(e){return e.auth.user.favourites},updateNewFavourite:function(e,t){e.auth.user.favourites.push(t)},getCurrentUser:function(e){return e.auth.user},getAuth:function(e){return e.auth.auth}},actions:{fetchTags:function(e){ee.a.get("/api/tags/get").then((function(t){console.log(t.data),e.commit("updateTags",t.data)}))},expandPhoto:function(e,t){var s=t.$buefy,a=t.$el;s.modal.open({content:[a]}),setTimeout((function(){e.commit("hideLoader")}),500)},loadFavourites:function(e){var t=localStorage.getItem("likedPhotos");t&&(t=JSON.parse(t),e.commit("storeFavourites",t)),e.commit("hideLoader")},likePhoto:function(e,t){var s=t.photo,a=t.username,r=t.$buefy,o=localStorage.getItem("likedPhotos");if(o){var n=JSON.parse(o);n.push(s),localStorage.setItem("likedPhotos",JSON.stringify(n))}else localStorage.setItem("likedPhotos","["+JSON.stringify(s)+"]");e.state.auth.auth&&(console.log("Favouriting..."),ee.a.post("/api/user/favourite",{username:a,photo:s}).then((function(t){200==t.data.code?(e.commit("pushNewFav",s),r.toast.open({message:"Liked!",type:"is-success"})):r.toast.open({message:"There was en error. Please try again.",type:"is-warning"})})).catch((function(e){console.log(e)})))},dislikePhoto:function(e,t){var s=t.photo,a=t.$buefy,r=t.username,o=localStorage.getItem("likedPhotos");if(o){var n=JSON.parse(o);if(null!==n){var i=n.findIndex((function(e){return e.url==s.url}));n.splice(i,1),localStorage.setItem("likedPhotos",JSON.stringify(n)),e.dispatch("loadFavourites")}}e.state.auth.auth&&ee.a.post("/api/user/unfav",{username:r,photo:s}).then((function(t){200==t.data.code?(e.commit("removeFav",s),a.toast.open({message:"Removed!",type:"is-success"})):a.toast.open({message:"There was en error. Please try again.",type:"is-warning"})})).catch((function(e){console.log(e)}))},getRandomPexels:function(e,t){return Object(V["a"])(this,void 0,void 0,(function(){var s,a;return Object(V["b"])(this,(function(r){switch(r.label){case 0:e.commit("showLoader"),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,ee.a.get("/api/photos/pexels/random")];case 2:return s=r.sent(),a=s.data,s.headers,e.commit("storeRandom",a.photos),e.commit("hideLoader"),[3,4];case 3:return r.sent(),e.commit("hideLoader"),t.toast.open({message:"Can't reach api.",type:"is-danger"}),[3,4];case 4:return[2]}}))}))},getCuratedPexels:function(e,t){return Object(V["a"])(this,void 0,void 0,(function(){var s;return Object(V["b"])(this,(function(a){switch(a.label){case 0:e.commit("showLoader"),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,ee.a.get("/api/photos/pexels/curated")];case 2:return s=a.sent().data,e.commit("storeCurated",s),e.commit("hideLoader"),[3,4];case 3:return a.sent(),e.commit("hideLoader"),t.toast.open({message:"Can't reach api.",type:"is-danger"}),[3,4];case 4:return[2]}}))}))},searchOnAllPlatforms:function(e,t){var s=t.word,a=t.page,r=t.perPage,o=t.$buefy;return Object(V["a"])(this,void 0,void 0,(function(){var t,n,i,l,u,c,d,p;return Object(V["b"])(this,(function(h){switch(h.label){case 0:e.commit("showLoader"),t=[],n=[],i=[],h.label=1;case 1:return h.trys.push([1,3,,4]),[4,ee.a.get("/api/search/photos/"+s+"/"+a+"/"+r)];case 2:return l=h.sent().data,u=l.flickr,c=l.pexels,l.pexies,d=l.unsplash,e.commit("updatePages",{pageName:"flickrSearchResultTotal",count:parseInt(u.total)}),e.commit("updatePages",{pageName:"pexelsSearchResultTotal",count:parseInt(c.total_results)}),e.commit("updatePages",{pageName:"unsplashSearchResultTotal",count:parseInt(d.total)}),u.photo&&u.photo.length>0&&(t=oe(u)),d.results&&d.results.length>0&&d.results.forEach((function(e){var t=se(e);n.push(t)})),c.photos&&c.photos.length>0&&(i=c.photos),p={flickr:t,unsplash:n,pexels:i,pexies:[]},e.commit("updateSearchResults",p),e.commit("hideLoader"),[3,4];case 3:return h.sent(),e.commit("hideLoader"),o.toast.open({message:"Can't reach api.",type:"is-danger"}),[3,4];case 4:return[2]}}))}))},searchNewPage:function(e,t){var s=t.word,a=t.page,r=t.perPage,o=t.$buefy,n=t.platform;return Object(V["a"])(this,void 0,void 0,(function(){var t,i,l;return Object(V["b"])(this,(function(u){switch(u.label){case 0:return console.log(s,a,r,n),[4,ee.a.get("/api/search/photos/"+s+"/"+a+"/"+r+"/"+n)];case 1:if(t=u.sent().data,console.log(t),t&&t.error)return o.toast.open({message:"Error while loading new photos, please try again.",type:"is-danger"}),[2];if("pexels"==n)t.photos&&e.commit("pushNewPage",{platform:n,photos:t.photos});else if("unsplash"==n){if(!t.results)return[2];i=[],t.results.forEach((function(e){var t=se(e);i.push(t)})),e.commit("pushNewPage",{platform:n,photos:i})}else"flickr"==n?(l=oe(t),e.commit("pushNewPage",{platform:n,photos:l})):"pexies"==n&&console.log("works!");return[2]}}))}))}}});a["a"].use(B["a"]);var ie=[{path:"/",name:"Home",component:Q},{path:"/Curated",name:"Curated",component:function(){return s.e("favourites").then(s.bind(null,"65cd"))}},{path:"/Favourites",name:"Favourites",component:function(){return s.e("favourites").then(s.bind(null,"0e0d"))}},{path:"/Search",name:"Search",component:function(){return s.e("search").then(s.bind(null,"2d3b"))}},{path:"/Profile",name:"Profile",meta:{requiresAuth:!0},component:function(){return s.e("profile").then(s.bind(null,"c66d"))}},{path:"/Profile/:username",name:"ProfileID",component:function(){return s.e("profileID").then(s.bind(null,"8946"))}},{path:"/Randomizer",name:"Randomizer",component:function(){return s.e("randomizer").then(s.bind(null,"617b"))}}],le=new B["a"]({mode:"history",base:"/",routes:ie});le.beforeEach((function(e,t,s){e.matched.some((function(e){return e.meta.requiresAuth}))?ne.getters.getAuth?s():s("/"):s()}));var ue=le,ce=s("289d"),de=(s("c350"),s("caf9"));a["a"].use(ce["a"]),a["a"].use(de["a"],{preLoad:1.3,error:"/error.png",loading:"/loading.gif",attempt:1,lazyComponent:!0}),a["a"].config.productionTip=!1,new a["a"]({router:ue,store:ne,render:function(e){return e(q)}}).$mount("#app")}});
//# sourceMappingURL=app.f15972fe.js.map