(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["search"],{2352:function(e,t,a){"use strict";var r=a("ec72"),s=a.n(r);s.a},"2d3b":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"search pb-5"},[a("div",{staticClass:"title"},[a("h1",{style:{color:e.nm?"#ddd":"#333"}},[e._v("Search")]),a("div",{staticClass:"search-box"},[a("b-field",[a("b-autocomplete",{attrs:{"open-on-focus":"",placeholder:"Search photos across Pexies, Pexels, Unsplash and Flickr...",data:e.getTags,"icon-pack":"fas",icon:"search",clearable:""},on:{select:function(t){return e.search(t)}},model:{value:e.searchWord,callback:function(t){e.searchWord=t},expression:"searchWord"}},[a("template",{slot:"empty"},[e._v("No results found")])],2)],1)],1)]),a("div",{staticClass:"search_results"},[a("b-tabs",{attrs:{type:"is-toggle is-warning",expanded:""},model:{value:e.currentTab,callback:function(t){e.currentTab=t},expression:"currentTab"}},[a("b-tab-item",{attrs:{label:"Pexies","icon-pack":"fas",icon:"picture"}},[a("template",{slot:"header"},[a("span",[a("img",{staticStyle:{width:"16px","margin-right":"0.5em"},attrs:{width:"16",src:"/favicon.png",alt:"pexies"}})]),a("span",[e._v("Pexies")])]),a("SearchResults",{attrs:{searchTriggered:e.searchTriggered,pageStart:e.paginationOptions[0].current*e.paginationOptions[0].perPage,pageEnd:e.paginationOptions[0].current*e.paginationOptions[0]+e.paginationOptions[0].perPage,platform:"pexies"}})],2),a("b-tab-item",{attrs:{label:"Flickr","icon-pack":"fab",icon:"flickr"}},[a("SearchResults",{attrs:{searchTriggered:e.searchTriggered,pageStart:e.paginationOptions[1].current*e.paginationOptions[1].perPage,pageEnd:e.paginationOptions[1].current*e.paginationOptions[1]+e.paginationOptions[1].perPage,platform:"flickr"}})],1),a("b-tab-item",{attrs:{label:"Pexels","icon-pack":"fab",icon:"pexels"}},[a("template",{slot:"header"},[a("span",[a("img",{staticStyle:{width:"16px","margin-right":"0.5em",filter:"grayscale(100%)"},attrs:{width:"16",src:"/pexels.png",alt:"pexels"}})]),a("span",[e._v("Pexels")])]),a("SearchResults",{attrs:{searchTriggered:e.searchTriggered,pageStart:e.paginationOptions[2].current*e.paginationOptions[2].perPage,pageEnd:e.paginationOptions[2].current*e.paginationOptions[2].perPage+e.paginationOptions[2].perPage,platform:"pexels"}})],2),a("b-tab-item",{attrs:{label:"Unsplash","icon-pack":"fab",icon:"unsplash"}},[a("SearchResults",{attrs:{searchTriggered:e.searchTriggered,pageStart:e.paginationOptions[3].current*e.paginationOptions[3].perPage,pageEnd:e.paginationOptions[3].current*e.paginationOptions[3].perPage+e.paginationOptions[3].perPage,platform:"unsplash"}})],1)],1)],1),e.$store.getters.getSearchResults?a("div",{staticClass:"bottom-bar",class:e.nm?"bg-dark":"",style:{color:e.nm?"#ddd!important":"#333!important"}},[a("transition-group",{attrs:{tag:"div",name:"fade",mode:"out-in"}},e._l(e.paginationOptions,(function(t,r){return a("div",{key:r},[e.currentTab==r&&e.getTotal(t.name)>1?a("b-pagination",{class:e.nm?"bg-dark":"",style:{color:e.nm?"#ddd!important":"#333!important"},attrs:{type:"is-warning",order:"is-centered","icon-pack":"fa",total:e.getTotal(t.name),"range-before":t.rangeBefore,"range-after":t.rangeAfter,"per-page":e.perPage},on:{change:function(a){return e.pageChange(a,t.name)}},model:{value:t.current,callback:function(a){e.$set(t,"current",a)},expression:"pagination.current"}}):e._e()],1)})),0)],1):e._e()])},s=[],i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"photos",attrs:{id:"intersection"}},[a("transition-group",{staticStyle:{display:"flex","flex-wrap":"wrap","align-items":"center","justify-content":"center",height:"100%",width:"100%","animation-duration":"0.1s!important"},attrs:{tag:"div",name:"fade",mode:"out-in"}},e._l(e.photos,(function(t,r){return a("div",{key:r+""+Math.random(),staticClass:"photo",class:[e.lightMode?"dark_shadows":"light",e.isPhotoLikeable(t)?"":"disable_grayscale"],staticStyle:{width:"200px",height:"200px","animation-duration":"0.1s!important"},style:{backgroundImage:"url("+t.src.medium+")"}},[a("div",[a("Photo",{attrs:{photo:t}})],1)])})),0),e.photos&&0==e.photos.length||!e.photos&&e.searchTriggered?a("b-message",{key:"message",staticClass:"my-2",staticStyle:{"animation-duration":"100ms"},attrs:{type:"is-danger"}},[e._v(e._s("pexies"==e.platform?"This feature is not avabilable yet... Stay tuned! ":"There is nothing here...")+" ")]):e._e()],1)},o=[],n=a("7856"),p={props:["name","pageStart","pageEnd","platform","searchTriggered"],components:{Photo:n["a"]},data(){return{loaded:!1}},computed:{likedImgs(){const e=localStorage.getItem("likedPhotos"),t=this.$store.getters.getCurrentUsersFavourites;return t?t&&e?[...JSON.parse(e),...t]:[]:JSON.parse(e)},lightMode(){return this.$store.getters["getNightMode"]},photos(){if(this.$props.platform)switch(this.$props.platform){case"pexies":return this.$store.getters.getSearchResults.pexies;case"pexels":return this.$store.getters.getSearchResults.pexels;case"unsplash":return this.$store.getters.getSearchResults.unsplash;case"flickr":return this.$store.getters.getSearchResults.flickr;default:return[]}return[]}},methods:{isPhotoLikeable(e){if(!this.likedImgs||0==this.likedImgs.length)return!1;const t=this.likedImgs.find(t=>t.url==e.url);return!t}},mounted(){setTimeout(()=>{this.loaded=!0},5e3)}},c=p,l=(a("dc35"),a("2877")),h=Object(l["a"])(c,i,o,!1,null,"77545a7c",null),g=h.exports,u={name:"Search",data(){return{searchTriggered:!1,lastSearch:"",perPage:24,selectedTag:"",currentTab:0,searchWord:"",paginationOptions:[{name:"pexies",current:1,total:0,rangeBefore:5,rangeAfter:5,prevIcon:"chevron-left",nextIcon:"chevron-right"},{name:"flickr",total:0,current:1,rangeBefore:5,rangeAfter:5,prevIcon:"chevron-left",nextIcon:"chevron-right"},{name:"pexels",current:1,total:0,rangeBefore:5,rangeAfter:5,prevIcon:"chevron-left",nextIcon:"chevron-right"},{name:"unsplash",current:1,total:0,rangeBefore:5,rangeAfter:5,prevIcon:"chevron-left",nextIcon:"chevron-right"}]}},components:{SearchResults:g},computed:{getTags(){let e=this.$store.getters.getTags.map(e=>e.title);return e.unshift(this.searchWord),e=e.filter(e=>e.toLowerCase().includes(this.searchWord.toLowerCase())),e.sort((e,t)=>e>t?1:e<t?-1:0)},nm(){return this.$store.getters.getNightMode}},methods:{pageChange(e,t){const a=this.lastSearch.slice();console.log("page changed"),this.$store.dispatch("searchNewPage",{page:e,platform:t,word:a,$buefy:this.$buefy,perPage:24})},getTotal(e){return"pexies"==e?this.$store.state.flickrSearchResultTotal:"pexels"==e?this.$store.state.pexelsSearchResultTotal:"flickr"==e?this.$store.state.flickrSearchResultTotal:"unsplash"==e?this.$store.state.unsplashSearchResultTotal:0},search(e=null){this.searchTriggered=!0;const t=e||this.searchWord;this.lastSearch=t.slice(),t.length>0&&(this.$store.dispatch("searchOnAllPlatforms",{word:t,page:1,perPage:24,$buefy:this.$buefy}),this.selectedTag="")}},created(){this.$store.commit("hideLoader"),this.getTags&&1==this.getTags.length&&this.$store.dispatch("fetchTags")}},d=u,f=(a("c615"),Object(l["a"])(d,r,s,!1,null,null,null));t["default"]=f.exports},7856:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.propCopy?a("div",{staticClass:"photo_link_wrapper"},[a("b-tag",{staticClass:"photographer",attrs:{type:"is-primary"}},[e.propCopy.photographer_url?a("a",{staticStyle:{color:"white"},attrs:{target:"_blank",href:e.propCopy.photographer_url}},[e._v(" "+e._s(e.propCopy.photographer&&e.propCopy.photographer.length>15?e.propCopy.photographer.substring(0,15)+"...":e.propCopy.photographer+"unknown")+" ")]):e._e()]),a("transition-group",{staticClass:"like_button",attrs:{tag:"div",name:"fade",mode:"out-in"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.isPhotoLikeable(e.propCopy)&&"/favourites"!==e.path,expression:"isPhotoLikeable(propCopy) && path !== '/favourites'"}],key:"like",on:{click:function(t){return e.like(e.propCopy)}}},[a("i",{staticClass:"fa fa-heart btn_icon"})]),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.isPhotoLikeable(e.propCopy),expression:"!isPhotoLikeable(propCopy)"}],key:"dislike",on:{click:function(t){return e.dislike(e.propCopy)}}},[a("i",{staticClass:"fa fa-times btn_icon"})])]),a("span",{staticClass:"expand_button",on:{click:e.expand}},[a("i",{staticClass:"fa fa-expand btn_icon"})]),a("span",{staticClass:"visit_button",on:{click:e.visit}},[a("i",{staticClass:"fa fa-search btn_icon"})])],1):e._e()},s=[],i=a("9ab4"),o=a("2b0e"),n=o["a"].extend({props:["photo"],data:function(){return{propCopy:{}}},created:function(){this.propCopy=JSON.parse(JSON.stringify(this.photo)),this.$emit("like")},mounted:function(){this.$emit("like")},methods:{expand:function(e){this.$store.commit("showLoader");var t=document.createElement("img");t.src=this.propCopy.src.original,t.onload=function(e){if(e.path&&e.path[0]){var t=e.path[0].naturalWidth/e.path[0].naturalHeight;r(t)}};var a=this;function r(e){var t;t=e<.5?"4by3":"16by9";var r=a.$createElement,s=r("p",{class:"image modal_image is-"+t},[r("img",{attrs:{src:a.propCopy.src.original}})]);a.$store.dispatch("expandPhoto",{$el:s,$buefy:a.$buefy})}},visit:function(){window.open(this.propCopy.url,"_blank")},like:function(e){this.isPhotoLikeable(e)?(this.propCopy.liked=!0,this.$store.dispatch("likePhoto",{photo:e,username:this.$store.state.auth.user.username,$buefy:this.$buefy}),this.$emit("like")):this.$buefy.toast.open({message:"You already liked this photo.",type:"is-danger"})},dislike:function(e){var t=this.$store.getters.getCurrentUser.username;this.$store.dispatch("dislikePhoto",{photo:e,username:t,$buefy:this.$buefy}),this.$emit("like")},isPhotoLikeable:function(e){var t=this.likedImgs.find((function(t){return t.url==e.url}));return!t}},computed:{path:function(){return this.$route.path},likedImgs:function(){var e=localStorage.getItem("likedPhotos"),t=this.$store.getters.getCurrentUsersFavourites;return!t&&e?JSON.parse(e):e&&t?Object(i["c"])(JSON.parse(e),t):[]}}}),p=n,c=(a("2352"),a("2877")),l=Object(c["a"])(p,r,s,!1,null,null,null);t["a"]=l.exports},baba:function(e,t,a){},c615:function(e,t,a){"use strict";var r=a("ffaf"),s=a.n(r);s.a},dc35:function(e,t,a){"use strict";var r=a("baba"),s=a.n(r);s.a},ec72:function(e,t,a){},ffaf:function(e,t,a){}}]);
//# sourceMappingURL=search.a3e05687.js.map