(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["search"],{2352:function(t,e,a){"use strict";var s=a("ec72"),r=a.n(s);r.a},"2d3b":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search pb-5"},[a("div",{staticClass:"title"},[a("h1",{style:{color:t.nm?"#ddd":"#333"}},[t._v("Search")]),a("div",{staticClass:"search-box"},[a("b-field",[a("b-autocomplete",{attrs:{placeholder:"Search photos across Pexels, Unsplash, Flickr and more...",data:t.getTags,"icon-pack":"fas",icon:"search",clearable:""},on:{select:function(e){return t.search(e)}},nativeOn:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search()}},model:{value:t.searchWord,callback:function(e){t.searchWord=e},expression:"searchWord"}},[a("template",{slot:"empty"},[t._v("No results found")])],2)],1)],1)]),a("div",{staticClass:"search_results"},[a("b-tabs",{attrs:{type:"is-toggle is-warning",expanded:""},model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}},[a("b-tab-item",{attrs:{label:"Pexies","icon-pack":"fas",icon:"picture"}},[a("template",{slot:"header"},[a("span",[a("img",{staticStyle:{width:"16px","margin-right":"0.5em"},attrs:{width:"16",src:"/favicon.png",alt:"pexies"}})]),a("span",[t._v("Pexies")])]),a("SearchResults",{attrs:{pageStart:t.paginationOptions[0].current*t.paginationOptions[0].perPage,pageEnd:t.paginationOptions[0].current*t.paginationOptions[0]+t.paginationOptions[0].perPage,platform:"pexies"}})],2),a("b-tab-item",{attrs:{label:"Flickr","icon-pack":"fab",icon:"flickr"}},[a("SearchResults",{attrs:{pageStart:t.paginationOptions[1].current*t.paginationOptions[1].perPage,pageEnd:t.paginationOptions[1].current*t.paginationOptions[1]+t.paginationOptions[1].perPage,platform:"flickr"}})],1),a("b-tab-item",{attrs:{label:"Pexels","icon-pack":"fab",icon:"pexels"}},[a("template",{slot:"header"},[a("span",[a("img",{staticStyle:{width:"16px","margin-right":"0.5em",filter:"grayscale(100%)"},attrs:{width:"16",src:"/pexels.png",alt:"pexels"}})]),a("span",[t._v("Pexels")])]),a("SearchResults",{attrs:{pageStart:t.paginationOptions[2].current*t.paginationOptions[2].perPage,pageEnd:t.paginationOptions[2].current*t.paginationOptions[2].perPage+t.paginationOptions[2].perPage,platform:"pexels"}})],2),a("b-tab-item",{attrs:{label:"Unsplash","icon-pack":"fab",icon:"unsplash"}},[a("SearchResults",{attrs:{pageStart:t.paginationOptions[3].current*t.paginationOptions[3].perPage,pageEnd:t.paginationOptions[3].current*t.paginationOptions[3].perPage+t.paginationOptions[3].perPage,platform:"unsplash"}})],1)],1)],1),t.$store.getters.getSearchResults?a("div",{staticClass:"bottom-bar",class:t.nm?"bg-dark":"",style:{color:t.nm?"#ddd!important":"#333!important"}},[a("transition-group",{attrs:{tag:"div",name:"fade",mode:"out-in"}},t._l(t.paginationOptions,(function(e,s){return a("div",{key:s},[t.currentTab==s&&t.getTotal(e.name)>1?a("b-pagination",{class:t.nm?"bg-dark":"",style:{color:t.nm?"#ddd!important":"#333!important"},attrs:{type:"is-warning",order:"is-centered","icon-pack":"fa",total:t.getTotal(e.name),"range-before":e.rangeBefore,"range-after":e.rangeAfter,"per-page":t.perPage},on:{change:function(a){return t.pageChange(a,e.name)}},model:{value:e.current,callback:function(a){t.$set(e,"current",a)},expression:"pagination.current"}}):t._e()],1)})),0)],1):t._e()])},r=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"photos",attrs:{id:"intersection"}},[a("transition-group",{staticStyle:{display:"flex","flex-wrap":"wrap","align-items":"center","justify-content":"center",height:"100%",width:"100%","animation-duration":"0.1s!important"},attrs:{tag:"div",name:"fade",mode:"out-in"}},t._l(t.photos,(function(e,s){return a("div",{key:s+""+Math.random(),staticClass:"photo",class:[t.lightMode?"dark_shadows":"light",t.isPhotoLikeable(e)?"":"disable_grayscale"],staticStyle:{width:"200px",height:"200px","animation-duration":"0.1s!important"},style:{backgroundImage:"url("+e.src.medium+")"}},[a("div",[a("Photo",{attrs:{photo:e}})],1)])})),0),t.photos&&0==t.photos.length||!t.photos?a("b-message",{key:"message",staticClass:"my-2",staticStyle:{"animation-duration":"100ms"},attrs:{type:"is-danger"}},[t._v(t._s("pexies"==t.platform?"There is nothing in pexies yet... but you can upload one!":"There is nothing here...")+" ")]):t._e()],1)},n=[],i=a("7856"),p={props:["name","pageStart","pageEnd","platform"],components:{Photo:i["a"]},data(){return{loaded:!1}},computed:{likedImgs(){const t=localStorage.getItem("likedPhotos"),e=this.$store.getters.getCurrentUsersFavourites;return e?e&&t?[...JSON.parse(t),...e]:[]:JSON.parse(t)},lightMode(){return this.$store.getters["getNightMode"]},photos(){if(this.$props.platform)switch(this.$props.platform){case"pexies":return this.$store.getters.getSearchResults.pexies;case"pexels":return this.$store.getters.getSearchResults.pexels;case"unsplash":return this.$store.getters.getSearchResults.unsplash;case"flickr":return this.$store.getters.getSearchResults.flickr;default:return[]}return[]}},methods:{isPhotoLikeable(t){const e=this.likedImgs.find(e=>e.url==t.url);return!e}},mounted(){setTimeout(()=>{this.loaded=!0},5e3)}},l=p,c=(a("a689"),a("2877")),h=Object(c["a"])(l,o,n,!1,null,"47db6a98",null),u=h.exports,g={name:"Search",data(){return{lastSearch:"",perPage:40,selectedTag:"",currentTab:0,searchWord:"",paginationOptions:[{name:"pexies",current:1,total:0,rangeBefore:5,rangeAfter:5,prevIcon:"chevron-left",nextIcon:"chevron-right"},{name:"flickr",total:0,current:1,rangeBefore:5,rangeAfter:5,prevIcon:"chevron-left",nextIcon:"chevron-right"},{name:"pexels",current:1,total:0,rangeBefore:5,rangeAfter:5,prevIcon:"chevron-left",nextIcon:"chevron-right"},{name:"unsplash",current:1,total:0,rangeBefore:5,rangeAfter:5,prevIcon:"chevron-left",nextIcon:"chevron-right"}]}},components:{SearchResults:u},computed:{getTags(){const t=this.$store.getters.getTags.map(t=>t.title);return t.unshift(this.searchWord),t.filter(t=>t.toLowerCase().includes(this.searchWord.toLowerCase()))},nm(){return this.$store.getters.getNightMode}},methods:{pageChange(t,e){const a=this.lastSearch.slice();console.log("page changed"),this.$store.dispatch("searchNewPage",{page:t,platform:e,word:a,$buefy:this.$buefy,perPage:40})},getTotal(t){return"pexies"==t?(console.log(t),console.log(this.$store.state.flickrSearchResultTotal),this.$store.state.flickrSearchResultTotal):"pexels"==t?(console.log(t),console.log(this.$store.state.pexelsSearchResultTotal),this.$store.state.pexelsSearchResultTotal):"flickr"==t?(console.log(t),console.log(this.$store.state.flickrSearchResultTotal),this.$store.state.flickrSearchResultTotal):"unsplash"==t?(console.log(t),console.log(this.$store.state.unsplashSearchResultTotal),this.$store.state.unsplashSearchResultTotal):0},search(t=null){const e=t||this.searchWord;this.lastSearch=e.slice(),e.length>0&&(this.$store.dispatch("searchOnAllPlatforms",{word:e,page:1,perPage:40,$buefy:this.$buefy}),this.selectedTag="")}},created(){this.$store.commit("hideLoader"),this.getTags&&1==this.getTags.length&&this.$store.dispatch("fetchTags")}},d=g,f=(a("c615"),Object(c["a"])(d,s,r,!1,null,null,null));e["default"]=f.exports},7856:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.propCopy?a("div",{staticClass:"photo_link_wrapper"},[a("b-tag",{staticClass:"photographer",attrs:{type:"is-primary"}},[t.propCopy.photographer_url?a("a",{staticStyle:{color:"white"},attrs:{target:"_blank",href:t.propCopy.photographer_url}},[t._v(" "+t._s(t.propCopy.photographer&&t.propCopy.photographer.length>15?t.propCopy.photographer.substring(0,15)+"...":t.propCopy.photographer+"unknown")+" ")]):t._e()]),a("transition-group",{staticClass:"like_button",attrs:{tag:"div",name:"fade",mode:"out-in"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:t.isPhotoLikeable(t.propCopy)&&"/favourites"!==t.path,expression:"isPhotoLikeable(propCopy) && path !== '/favourites'"}],key:"like",on:{click:function(e){return t.like(t.propCopy)}}},[a("i",{staticClass:"fa fa-heart btn_icon"})]),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.isPhotoLikeable(t.propCopy),expression:"!isPhotoLikeable(propCopy)"}],key:"dislike",on:{click:function(e){return t.dislike(t.propCopy)}}},[a("i",{staticClass:"fa fa-times btn_icon"})])]),a("span",{staticClass:"expand_button",on:{click:t.expand}},[a("i",{staticClass:"fa fa-expand btn_icon"})]),a("span",{staticClass:"visit_button",on:{click:t.visit}},[a("i",{staticClass:"fa fa-search btn_icon"})])],1):t._e()},r=[],o=a("9ab4"),n=a("2b0e"),i=n["a"].extend({props:["photo"],data:function(){return{propCopy:{}}},created:function(){this.propCopy=JSON.parse(JSON.stringify(this.photo)),this.$emit("like")},mounted:function(){this.$emit("like")},methods:{expand:function(t){this.$store.commit("showLoader");var e=document.createElement("img");e.src=this.propCopy.src.original,e.onload=function(t){if(t.path&&t.path[0]){var e=t.path[0].naturalWidth/t.path[0].naturalHeight;s(e)}};var a=this;function s(t){var e;e=t<.5?"4by3":"16by9";var s=a.$createElement,r=s("p",{class:"image modal_image is-"+e},[s("img",{attrs:{src:a.propCopy.src.original}})]);a.$store.dispatch("expandPhoto",{$el:r,$buefy:a.$buefy})}},visit:function(){window.open(this.propCopy.url,"_blank")},like:function(t){this.isPhotoLikeable(t)?(this.propCopy.liked=!0,this.$store.dispatch("likePhoto",{photo:t,username:this.$store.state.auth.user.username,$buefy:this.$buefy}),this.$emit("like")):this.$buefy.toast.open({message:"You already liked this photo.",type:"is-danger"})},dislike:function(t){var e=this.$store.getters.getCurrentUser.username;this.$store.dispatch("dislikePhoto",{photo:t,username:e,$buefy:this.$buefy}),this.$emit("like")},isPhotoLikeable:function(t){var e=this.likedImgs.find((function(e){return e.url==t.url}));return!e}},computed:{path:function(){return this.$route.path},likedImgs:function(){var t=localStorage.getItem("likedPhotos"),e=this.$store.getters.getCurrentUsersFavourites;return!e&&t?JSON.parse(t):t&&e?Object(o["c"])(JSON.parse(t),e):[]}}}),p=i,l=(a("2352"),a("2877")),c=Object(l["a"])(p,s,r,!1,null,null,null);e["a"]=c.exports},"7d95":function(t,e,a){},a689:function(t,e,a){"use strict";var s=a("7d95"),r=a.n(s);r.a},c615:function(t,e,a){"use strict";var s=a("ffaf"),r=a.n(s);r.a},ec72:function(t,e,a){},ffaf:function(t,e,a){}}]);
//# sourceMappingURL=search.581b6d09.js.map