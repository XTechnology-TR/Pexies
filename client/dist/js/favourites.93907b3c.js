(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["favourites"],{"0e0d":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"favourites"},[s("div",{staticClass:"title"},[s("h1",{style:{color:t.nm?"#ddd":"#333"}},[t._v("Favourites")]),t.$store.getters.getAuth?s("div",{staticClass:"sync bg-warning mt-2",style:t.nm?"background-color: #333; border: 1px solid #555":"",on:{click:function(e){return t.syncFavs()}}},[s("QSpinnerInfinity",{staticStyle:{"font-size":"21px",color:"#444!important"}})],1):t._e(),t.$store.getters.getAuth?t._e():s("p",{staticStyle:{width:"50%","font-size":"12px",margin:"5px auto","font-weight":"400",opacity:"0.75"}},[t._v("Hello guest. Login to sync your favourites to your account.")]),t.$store.getters.getAuth?t._e():s("div",{staticClass:"sync bg-warning",style:t.nm?"background-color: #444; border: 1px solid #555":""},[s("QSpinnerInfinity",{staticStyle:{"font-size":"21px",color:"#333!important",opacity:"60%"}})],1)]),s("Photos",{attrs:{pageStart:t.pagination.current*t.perPage-t.perPage,pageEnd:t.pagination.current*t.perPage,name:t.$store.getters.getAuth?"user":"guest"}}),s("div",{staticClass:"bottom-bar",class:t.nm?"bg-dark":"",style:{color:t.nm?"#ddd!important":"#333!important"}},[s("pagination",{class:t.nm?"bg-dark":"",style:{color:t.nm?"#ddd!important":"#333!important"},attrs:{type:"is-warning",order:"is-centered","icon-pack":"fa",pagination:t.pagination,"per-page":t.perPage},on:{pageChange:function(e){return t.pageChange(e)}}})],1),t.loaded&&0==t.favourites?s("div",{staticClass:"error_secondary"},[s("b-message",{attrs:{type:"is-warning"}},[t._v(" You didn't save any pictures, yet. ")]),s("b-button",{attrs:{type:"is-warning"},on:{click:function(e){return t.$router.push("/")}}},[t._v("Show me some!")])],1):t._e()],1)},r=[],n=s("5fed"),o=s("fe09"),i=s("6407"),p={name:"Favourites",data(){return{loaded:!1,perPage:20,pagination:{name:"",current:1,rangeBefore:2,rangeAfter:2,prevIcon:"chevron-left",nextIcon:"chevron-right"}}},watch:{auth(t){console.log("v",t),this.pagination.name=t?"userFav":"localFav"}},computed:{auth(){return this.$store.getters.getAuth},favourites(){const t=this.$store.getters.getFavourites;return t.length},nm(){return this.$store.getters.getNightMode}},methods:{pageChange(t){this.pagination.current=t},syncFavs(){this.$store.dispatch("syncFavs",{$buefy:this.$buefy})}},mounted(){this.$store.commit("hideLoader"),this.auth?this.pagination.name="userFav":this.pagination.name="localFav"},components:{Photos:n["a"],QSpinnerInfinity:o["a"],pagination:i["a"]}},c=p,l=(s("a02d"),s("2877")),h=Object(l["a"])(c,a,r,!1,null,null,null);e["default"]=h.exports},2352:function(t,e,s){"use strict";var a=s("ec72"),r=s.n(a);r.a},"32fe":function(t,e,s){},"45e7":function(t,e,s){"use strict";var a=s("32fe"),r=s.n(a);r.a},"5fed":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"show",rawName:"v-show",value:!t.$store.state.transition,expression:"!$store.state.transition"}],staticClass:"photos",attrs:{id:"intersection"}},[s("div",{staticStyle:{display:"flex","flex-wrap":"wrap","align-items":"center","justify-content":"center",height:"100%",width:"100%"}},t._l(t.photos,(function(e,a){return s("div",{key:a+""+Math.random(),staticClass:"photo",class:[t.lightMode?"dark_shadows":"light",a<t.perPage?"":"intersect",t.isPhotoLikeable(e)?"":"disable_grayscale"],staticStyle:{width:"200px",height:"200px",transition:"300ms!important"},style:{visibility:a<t.perPage?"":"hidden",opacity:a<t.perPage?1:0}},[s("lazy-component",{staticStyle:{height:"100%",width:"100%","z-index":"1"}},[s("img",{staticStyle:{width:"100%",height:"100%","object-fit":"cover"},attrs:{src:e.src.medium?e.src.medium:e.src.small}})]),s("div",{staticStyle:{"z-index":"2",background:"transparent"}},[s("Photo",{attrs:{photo:e},on:{like:function(e){return t.callbackFunc()}}})],1)],1)})),0),t.photos&&0==t.photos.length||!t.photos?s("b-message",{key:"message",staticClass:"my-2",staticStyle:{"animation-duration":"100ms"},attrs:{type:"is-danger"}},[t._v("There is nothing here... ")]):t._e()],1)},r=[],n=s("7856"),o={props:["name","userPhotos","pageStart","pageEnd"],data(){return{offsetTop:0,currentPage:1,total:null,loaded:!1}},watch:{photos(){this.callbackFunc()},offsetTop(t){this.callbackFunc()}},components:{Photo:n["a"]},computed:{likedImgs(){const t=localStorage.getItem("likedPhotos"),e=this.$store.getters.getCurrentUsersFavourites;return e?e&&t?[...JSON.parse(t),...e]:[]:JSON.parse(t)},perPage(){return window.innerWidth>=1920?24:window.innerWidth>=1440?16:window.innerWidth>=1280||window.innerWidth>=768?12:8},lightMode(){return this.$store.getters["getNightMode"]},photos(){if("curated"==this.$props.name)return console.log(this.pageStart,this.pageEnd),this.$store.getters.getCuratedPhotos.slice(this.pageStart,this.pageEnd);if("random"==this.$props.name)return this.$store.getters.getRandomPhotos;if("user"==this.$props.name){const t=this.$store.getters.getCurrentUsersFavourites.slice(this.pageStart,this.pageEnd);return t||[]}if("guest"==this.$props.name){const t=this.$store.getters.getFavourites.slice(this.pageStart,this.pageEnd);return t||[]}if("search"==this.$props.name)return this.$store.getters.getSearchResults;if("profile"==this.$props.name){const t=this.$store.getters.getCurrentUsersFavourites;return t.reverse()}if("profileID"==this.$props.name){const t=this.$props.userPhotos;return t.reverse()}return"dashboard"==this.$props.name?this.$store.getters.getDashboard.slice(this.pageStart,this.pageEnd):[]}},methods:{isPhotoLikeable(t){const e=this.likedImgs.find(e=>e.url==t.url);return!e},onScroll(t){console.log("scrolling");const e=document.getElementById("intersection");this.offsetTop=e.scrollTop},isElementInViewport(t){const e=document.getElementById("intersection"),s=t.getBoundingClientRect();return s.top>=-100&&s.bottom<=(e.innerHeight||e.clientHeight)+400},callbackFunc(){const t=document.querySelectorAll(".intersect");for(let e=0;e<t.length;e++)this.isElementInViewport(t[e])?t[e].classList.add("in-view"):t[e].classList.remove("in-view")}},async mounted(){const t=this,e=document.getElementById("intersection");switch(e.addEventListener("scroll",this.onScroll),this.$store.commit("showLoader"),this.$props.name){case"curated":this.$store.dispatch("getCuratedPexels",this.$buefy);break;case"random":setTimeout(()=>{t&&t.$store.dispatch("getRandomPexels",this.$buefy)},300);break;case"user":break;case"guest":this.$store.dispatch("loadFavourites",this.$buefy);break}this.callbackFunc(),setTimeout(()=>{t&&(t.loaded=!0)},2e3)},destroyed(){const t=document.getElementById("intersection");t.removeEventListener("scroll",this.onScroll)}},i=o,p=(s("45e7"),s("2877")),c=Object(p["a"])(i,a,r,!1,null,null,null);e["a"]=c.exports},6407:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.getTotal>0&&t.pagination&&t.perPage?s("transition",{attrs:{tag:"div",name:"fade",mode:"out-in"}},[s("b-pagination",{style:{color:t.nm?"#333!important":"#222!important"},attrs:{type:"is-warning",order:"is-centered","icon-pack":"fa",total:t.getTotal,"range-before":t.pagination.rangeBefore,"range-after":t.pagination.rangeAfter,"per-page":t.perPage},on:{change:function(e){return t.pageChange(e)}},model:{value:t.curr,callback:function(e){t.curr=e},expression:"curr"}})],1):t._e()},r=[],n={name:"pagination",props:["perPage","pagination"],data(){return{curr:1}},methods:{pageChange(t){this.$emit("pageChange",t)}},computed:{getTotal(){return console.log(this.pagination.name),this.pagination?"pexiesRandom"==this.pagination.name?this.$store.getters.getRandomPhotos.length:"curated"==this.pagination.name?this.$store.getters.getCuratedPhotos.length:"userFav"==this.pagination.name?this.$store.getters.getCurrentUsersFavourites.length:"localFav"==this.pagination.name?this.$store.getters.getFavourites.length:0:0},nm(){return this.$store.getters.getNightMode}}},o=n,i=(s("79fd"),s("2877")),p=Object(i["a"])(o,a,r,!1,null,null,null);e["a"]=p.exports},"65cd":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"curated"},[s("div",{staticClass:"title"},[s("h1",{style:{color:t.nm?"#ddd":"#333"}},[t._v("Curated")]),s("p",{staticStyle:{"font-size":"12px",opacity:"0.75","margin-top":"5px"}},[t._v("Explore new content from Pexels curated list.")])]),s("Photos",{attrs:{pageStart:t.pagination.current*t.perPage-t.perPage,pageEnd:t.pagination.current*t.perPage,name:"curated"}}),s("div",{staticClass:"bottom-bar",class:t.nm?"bg-dark":"",style:{color:t.nm?"#ddd!important":"#333!important"}},[s("pagination",{class:t.nm?"bg-dark":"",style:{color:t.nm?"#ddd!important":"#333!important"},attrs:{type:"is-warning",order:"is-centered","icon-pack":"fa",pagination:t.pagination,"per-page":t.perPage},on:{pageChange:function(e){return t.pageChange(e)}}})],1)],1)},r=[],n=s("5fed"),o=s("6407"),i={name:"Curated",data(){return{loaded:!1,perPage:20,pagination:{name:"curated",current:1,rangeBefore:2,rangeAfter:2,prevIcon:"chevron-left",nextIcon:"chevron-right"}}},components:{Photos:n["a"],pagination:o["a"]},methods:{pageChange(t){this.pagination.current=t}},computed:{nm(){return this.$store.getters.getNightMode}}},p=i,c=s("2877"),l=Object(c["a"])(p,a,r,!1,null,null,null);e["default"]=l.exports},7856:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.propCopy?s("div",{staticClass:"photo_link_wrapper"},[s("b-tag",{staticClass:"photographer",attrs:{type:"is-primary"}},[t.propCopy.photographer_url?s("a",{staticStyle:{color:"white"},attrs:{target:"_blank",href:t.propCopy.photographer_url}},[t._v(" "+t._s(t.propCopy.photographer&&t.propCopy.photographer.length>15?t.propCopy.photographer.substring(0,15)+"...":t.propCopy.photographer+"unknown")+" ")]):t._e()]),s("transition-group",{staticClass:"like_button",attrs:{tag:"div",name:"fade",mode:"out-in"}},[s("span",{directives:[{name:"show",rawName:"v-show",value:t.isPhotoLikeable(t.propCopy)&&"/favourites"!==t.path,expression:"isPhotoLikeable(propCopy) && path !== '/favourites'"}],key:"like",on:{click:function(e){return t.like(t.propCopy)}}},[s("i",{staticClass:"fa fa-heart btn_icon"})]),s("span",{directives:[{name:"show",rawName:"v-show",value:!t.isPhotoLikeable(t.propCopy),expression:"!isPhotoLikeable(propCopy)"}],key:"dislike",on:{click:function(e){return t.dislike(t.propCopy)}}},[s("i",{staticClass:"fa fa-times btn_icon"})])]),s("span",{staticClass:"expand_button",on:{click:t.expand}},[s("i",{staticClass:"fa fa-expand btn_icon"})]),s("span",{staticClass:"visit_button",on:{click:t.visit}},[s("i",{staticClass:"fa fa-search btn_icon"})])],1):t._e()},r=[],n=s("9ab4"),o=s("2b0e"),i=o["a"].extend({props:["photo"],data:function(){return{propCopy:{}}},created:function(){this.propCopy=JSON.parse(JSON.stringify(this.photo)),this.$emit("like")},mounted:function(){this.$emit("like")},methods:{expand:function(t){this.$store.commit("showLoader");var e=document.createElement("img");e.src=this.propCopy.src.original,e.onload=function(t){if(t.path&&t.path[0]){var e=t.path[0].naturalWidth/t.path[0].naturalHeight;a(e)}};var s=this;function a(t){var e;e=t<.5?"4by3":"16by9";var a=s.$createElement,r=a("p",{class:"image modal_image is-"+e},[a("img",{attrs:{src:s.propCopy.src.original}})]);s.$store.dispatch("expandPhoto",{$el:r,$buefy:s.$buefy})}},visit:function(){window.open(this.propCopy.url,"_blank")},like:function(t){this.isPhotoLikeable(t)?(this.propCopy.liked=!0,this.$store.dispatch("likePhoto",{photo:t,username:this.$store.state.auth.user.username,$buefy:this.$buefy}),this.$emit("like")):this.$buefy.toast.open({message:"You already liked this photo.",type:"is-danger"})},dislike:function(t){var e=this.$store.getters.getCurrentUser.username;this.$store.dispatch("dislikePhoto",{photo:t,username:e,$buefy:this.$buefy}),this.$emit("like")},isPhotoLikeable:function(t){var e=this.likedImgs.find((function(e){return e.url==t.url}));return!e}},computed:{path:function(){return this.$route.path},likedImgs:function(){var t=localStorage.getItem("likedPhotos"),e=this.$store.getters.getCurrentUsersFavourites;return!e&&t?JSON.parse(t):t&&e?Object(n["c"])(JSON.parse(t),e):[]}}}),p=i,c=(s("2352"),s("2877")),l=Object(c["a"])(p,a,r,!1,null,null,null);e["a"]=l.exports},"79fd":function(t,e,s){"use strict";var a=s("bb47"),r=s.n(a);r.a},a02d:function(t,e,s){"use strict";var a=s("f507"),r=s.n(a);r.a},bb47:function(t,e,s){},ec72:function(t,e,s){},f507:function(t,e,s){}}]);
//# sourceMappingURL=favourites.93907b3c.js.map